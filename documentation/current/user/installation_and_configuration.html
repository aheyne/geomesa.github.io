

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Installation and Configuration &mdash; GeoMesa 1.2.3 Manuals</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme_custom.css" type="text/css" />
  

  

  
    <link rel="top" title="GeoMesa 1.2.3 Manuals" href="../index.html"/>
        <link rel="up" title="User Manual" href="index.html"/>
        <link rel="next" title="GeoMesa Data Stores" href="datastores.html"/>
        <link rel="prev" title="Architecture Overview" href="architecture.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> GeoMesa
          

          
          </a>

          
            
            
              <div class="version">
                1.2.4-SNAPSHOT
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">User Manual</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="architecture.html">Architecture Overview</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">Installation and Configuration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#prerequisites-and-platform">Prerequisites and Platform</a></li>
<li class="toctree-l3"><a class="reference internal" href="#versions-and-downloads">Versions and Downloads</a></li>
<li class="toctree-l3"><a class="reference internal" href="#installing-from-the-binary-distribution">Installing from the Binary Distribution</a></li>
<li class="toctree-l3"><a class="reference internal" href="#building-from-source">Building from Source</a></li>
<li class="toctree-l3"><a class="reference internal" href="#installing-the-accumulo-distributed-runtime-library">Installing the Accumulo Distributed Runtime Library</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#for-accumulo-1-5">For Accumulo 1.5</a></li>
<li class="toctree-l4"><a class="reference internal" href="#for-accumulo-1-6">For Accumulo 1.6+</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#setting-up-the-command-line-tools">Setting up the Command Line Tools</a></li>
<li class="toctree-l3"><a class="reference internal" href="#installing-the-geomesa-geoserver-plugins">Installing the GeoMesa GeoServer Plugins</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#for-accumulo">For Accumulo</a></li>
<li class="toctree-l4"><a class="reference internal" href="#for-kafka">For Kafka</a></li>
<li class="toctree-l4"><a class="reference internal" href="#for-hbase">For HBase</a></li>
<li class="toctree-l4"><a class="reference internal" href="#for-cassandra">For Cassandra</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#upgrading">Upgrading</a></li>
<li class="toctree-l3"><a class="reference internal" href="#security-concerns">Security Concerns</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#apache-commons-collections">Apache Commons Collections</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="datastores.html">GeoMesa Data Stores</a></li>
<li class="toctree-l2"><a class="reference internal" href="accumulo_datastore.html">Accumulo Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="kafka_datastore.html">Kafka Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="hbase_datastore.html">HBase/BigTable Data Stores</a></li>
<li class="toctree-l2"><a class="reference internal" href="cassandra_datastore.html">Cassandra Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="modules.html">Modules and Libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="geoserver.html">GeoMesa GeoServer Plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="commandline_tools.html">Command Line Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="data_management.html">Data Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="examples.html">Examples</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../developer/index.html">Developer Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/index.html">Tutorials</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">GeoMesa</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
          <li><a href="index.html">User Manual</a> &raquo;</li>
      
    <li>Installation and Configuration</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/user/installation_and_configuration.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="installation-and-configuration">
<h1>Installation and Configuration<a class="headerlink" href="#installation-and-configuration" title="Permalink to this headline">¶</a></h1>
<p>This chapter describes how to install and configure GeoMesa on a Linux system.
This includes installation of the Accumulo and Kafka data stores and
installation and configuration of the GeoServer plugins.</p>
<div class="section" id="prerequisites-and-platform">
<h2>Prerequisites and Platform<a class="headerlink" href="#prerequisites-and-platform" title="Permalink to this headline">¶</a></h2>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>GeoMesa requires <a class="reference external" href="http://accumulo.apache.org/">Accumulo</a> 1.5, 1.6, or 1.7, which in turn
requires <a class="reference external" href="http://hadoop.apache.org/">Hadoop</a> 2.2 or better and <a class="reference external" href="http://zookeeper.apache.org">ZooKeeper</a>
3.4.5 or better. Installing and configuring Accumulo is beyond the scope of this manual.</p>
<p class="last">Using the <a class="reference external" href="http://kafka.apache.org/">Kafka</a> module requires Kafka 0.8.2 or 0.9 and ZooKeeper 3.4.5 or better.</p>
</div>
<p>To install the binary distribution:</p>
<ul class="simple">
<li><a class="reference external" href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">Java JRE or JDK 8</a>,</li>
</ul>
<p>To build and install the source distribution:</p>
<ul class="simple">
<li><a class="reference external" href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">Java JDK 8</a>,</li>
<li>Apache Maven (<a class="reference external" href="http://maven.apache.org/">http://maven.apache.org/</a>) 3.2.2 or better</li>
<li>A <code class="docutils literal"><span class="pre">git</span></code> client (<a class="reference external" href="http://git-scm.com/">http://git-scm.com/</a>)</li>
</ul>
</div>
<div class="section" id="versions-and-downloads">
<h2>Versions and Downloads<a class="headerlink" href="#versions-and-downloads" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The current recommended version of GeoMesa to install is 1.2.4-SNAPSHOT.</p>
</div>
<p><strong>Latest release</strong>: 1.2.4-SNAPSHOT</p>
<ul class="simple">
<li>Release tarball: <a class="reference external" href="https://repo.locationtech.org/content/repositories/geomesa-releases/org/locationtech/geomesa/geomesa-dist/1.2.3/geomesa-dist-1.2.3-bin.tar.gz">https://repo.locationtech.org/content/repositories/geomesa-releases/org/locationtech/geomesa/geomesa-dist/1.2.3/geomesa-dist-1.2.3-bin.tar.gz</a></li>
<li>Source: <a class="reference external" href="https://github.com/locationtech/geomesa/archive/geomesa-1.2.3.tar.gz">https://github.com/locationtech/geomesa/archive/geomesa-1.2.3.tar.gz</a></li>
</ul>
<p><strong>Development version (source only)</strong>: 1.2.4-SNAPSHOT</p>
<ul class="simple">
<li>Source: <a class="reference external" href="https://github.com/locationtech/geomesa/archive/master.tar.gz">https://github.com/locationtech/geomesa/archive/master.tar.gz</a></li>
</ul>
<p><strong>Latest release which has been fully reviewed by Eclipse Legal</strong>: 1.2.0</p>
<p>GeoMesa is part of the Locationtech working group at Eclipse. The Eclipse legal team fully reviews each major release for IP concerns.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Eclipse releases may not contain all the bug fixes and improvements from the latest release.</p>
</div>
<ul class="simple">
<li>Release distribution: <a class="reference external" href="http://download.locationtech.org/geomesa/1.2.0/geomesa-dist-1.2.0-bin.tar.gz">http://download.locationtech.org/geomesa/1.2.0/geomesa-dist-1.2.0-bin.tar.gz</a></li>
<li>Source: <a class="reference external" href="http://download.locationtech.org/geomesa/1.2.0/geomesa-source-1.2.0.tar.gz">http://download.locationtech.org/geomesa/1.2.0/geomesa-source-1.2.0.tar.gz</a></li>
</ul>
<p><strong>1.1.x release</strong>: 1.1.0-rc.7</p>
<ul class="simple">
<li>Release tarball: <a class="reference external" href="https://repo.locationtech.org/content/repositories/geomesa-releases/org/locationtech/geomesa/geomesa-assemble/1.1.0-rc.7/geomesa-assemble-1.1.0-rc.7-bin.tar.gz">https://repo.locationtech.org/content/repositories/geomesa-releases/org/locationtech/geomesa/geomesa-assemble/1.1.0-rc.7/geomesa-assemble-1.1.0-rc.7-bin.tar.gz</a></li>
<li>Source: <a class="reference external" href="https://github.com/locationtech/geomesa/archive/geomesa-1.1.0-rc.7.tar.gz">https://github.com/locationtech/geomesa/archive/geomesa-1.1.0-rc.7.tar.gz</a></li>
</ul>
<p>GeoMesa artifacts can be downloaded from the LocationTech Maven repository: <a class="reference external" href="https://repo.locationtech.org/content/repositories/geomesa-releases/">https://repo.locationtech.org/content/repositories/geomesa-releases/</a>.</p>
<p>Snapshot artifacts are available in the LocationTech snapshots repository: <a class="reference external" href="https://repo.locationtech.org/content/repositories/geomesa-snapshots/">https://repo.locationtech.org/content/repositories/geomesa-snapshots/</a>.</p>
</div>
<div class="section" id="installing-from-the-binary-distribution">
<span id="install-binary"></span><h2>Installing from the Binary Distribution<a class="headerlink" href="#installing-from-the-binary-distribution" title="Permalink to this headline">¶</a></h2>
<p>GeoMesa artifacts are available for download or can be built from source.
The easiest way to get started is to download the most recent binary version (<code class="docutils literal"><span class="pre">$VERSION</span></code> = 1.2.4-SNAPSHOT)
and untar it somewhere convenient.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span><span class="c1"># download and unpackage the most recent distribution</span>
$ wget http://repo.locationtech.org/content/repositories/geomesa-releases/org/locationtech/geomesa/geomesa-dist/<span class="nv">$VERSION</span>/geomesa-dist-<span class="nv">$VERSION</span>-bin.tar.gz
$ tar xvf geomesa-dist-<span class="nv">$VERSION</span>-bin.tar.gz
$ <span class="nb">cd</span> geomesa-<span class="nv">$VERSION</span>
$ ls
dist/  docs/  LICENSE.txt  README.md
</pre></div>
</div>
</div>
<div class="section" id="building-from-source">
<h2>Building from Source<a class="headerlink" href="#building-from-source" title="Permalink to this headline">¶</a></h2>
<p>GeoMesa may also be built from source. For more information refer to <a class="reference internal" href="../developer/introduction.html#building-from-source"><span>Building from Source</span></a>
in the <a class="reference internal" href="../developer/index.html"><em>Developer Manual</em></a>, or to the <code class="docutils literal"><span class="pre">README.md</span></code> file in the the
source distribution. The remainder of the instructions in this chapter assume
the use of the binary GeoMesa distribution. If you have built from source, the
distribution is created in the <code class="docutils literal"><span class="pre">geomesa-dist/target</span></code> directory as a part of
the build process.</p>
<p>More information about developing with GeoMesa may be found in the <a class="reference internal" href="../developer/index.html"><em>Developer Manual</em></a>.</p>
</div>
<div class="section" id="installing-the-accumulo-distributed-runtime-library">
<span id="install-accumulo-runtime"></span><h2>Installing the Accumulo Distributed Runtime Library<a class="headerlink" href="#installing-the-accumulo-distributed-runtime-library" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal"><span class="pre">geomesa-$VERSION/dist/accumulo</span></code> directory contains the distributed
runtime JAR that contains server-side code for Accumulo that must be made
available on each of the Accumulo tablet servers in the cluster. This JAR
contains GeoMesa code and the Accumulo iterator required for querying
GeoMesa data.</p>
<p>The version of the distributed runtime JAR must match the version of the GeoMesa
data store client JAR (usually installed in GeoServer; see below). If not,
queries might not work correctly or at all.</p>
<div class="section" id="for-accumulo-1-5">
<h3>For Accumulo 1.5<a class="headerlink" href="#for-accumulo-1-5" title="Permalink to this headline">¶</a></h3>
<p>The runtime JAR should be copied into the <code class="docutils literal"><span class="pre">$ACCUMULO_HOME/lib/ext</span></code> folder on
each tablet server.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span><span class="c1"># something like this for each tablet server</span>
$ scp geomesa-<span class="nv">$VERSION</span>/dist/accumulo/geomesa-accumulo-distributed-runtime-<span class="nv">$VERSION</span>.jar tserver1:<span class="nv">$ACCUMULO_HOME</span>/lib/ext
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You do not need the JAR on the Accumulo master server, and including
it there may cause classpath issues later.</p>
</div>
</div>
<div class="section" id="for-accumulo-1-6">
<span id="install-accumulo-runtime-namespace"></span><h3>For Accumulo 1.6+<a class="headerlink" href="#for-accumulo-1-6" title="Permalink to this headline">¶</a></h3>
<p>Copying the runtime JAR to each tablet server as for Accumulo 1.5 above will
still work, but in Accumulo 1.6, we can leverage namespaces to isolate the
GeoMesa classpath from the rest of Accumulo. First, you have to create the
namespace in the Accumulo shell:</p>
<div class="code highlight-python"><div class="highlight"><pre><span></span>$ accumulo shell -u root
&gt; createnamespace myNamespace
&gt; grant NameSpace.CREATE_TABLE -ns myNamespace -u myUser
&gt; config -s general.vfs.context.classpath.myNamespace=hdfs://NAME_NODE_FDQN:54310/accumulo/classpath/myNamespace/[^.].*.jar
&gt; config -ns myNamespace -s table.classpath.context=myNamespace
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Depending on Hadoop version, you may need to use <code class="docutils literal"><span class="pre">hdfs://NAME_NODE_FDQN:8020</span></code>.</p>
</div>
<p>Then copy the distributed runtime jar into HDFS under the path you specified.
The path above is just an example; you can included nested folders with project
names, version numbers, and other information in order to have different versions of GeoMesa on
the same Accumulo instance. You should remove any GeoMesa JARs under
<code class="docutils literal"><span class="pre">$ACCUMULO_HOME/lib/ext</span></code> to prevent any classpath conflicts.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">When connecting to a data store using Accumulo namespaces, you must prefix
the <code class="docutils literal"><span class="pre">tableName</span></code> parameter with the namespace. For example, refer to the
<code class="docutils literal"><span class="pre">my_catalog</span></code> table as <code class="docutils literal"><span class="pre">myNamespace.my_catalog</span></code>.</p>
</div>
</div>
</div>
<div class="section" id="setting-up-the-command-line-tools">
<span id="setting-up-commandline"></span><h2>Setting up the Command Line Tools<a class="headerlink" href="#setting-up-the-command-line-tools" title="Permalink to this headline">¶</a></h2>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">To use the Accumulo data store with the command line tools, you need to install
the distributed runtime first. See <a class="reference internal" href="#install-accumulo-runtime"><span>Installing the Accumulo Distributed Runtime Library</span></a>.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The command line tools currently support the Accumulo and Kafka
data stores.</p>
</div>
<p>GeoMesa comes with a set of command line tools for managing features. To complete the setup
of the tools, <cite>cd</cite> into the <code class="docutils literal"><span class="pre">dist/tools</span></code> directory of the binary distribution and unpack the
<code class="docutils literal"><span class="pre">geomesa-tools-$VERSION-bin.tar.gz</span></code> file (<code class="docutils literal"><span class="pre">$VERSION</span></code> = 1.2.4-SNAPSHOT).</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ <span class="nb">cd</span> geomesa-<span class="nv">$VERSION</span>/dist/tools
$ tar -xzvf geomesa-tools-<span class="nv">$VERSION</span>-bin.tar.gz
$ <span class="nb">cd</span> geomesa-tools-<span class="nv">$VERSION</span>
$ ls
bin/  conf/  examples/  lib/
</pre></div>
</div>
<p>The instructions below assume that the <code class="docutils literal"><span class="pre">geomesa-tools-$VERSION</span></code> directory is kept in the
<code class="docutils literal"><span class="pre">geomesa-$VERSION/dist/tools</span></code> directory, but the tools distribution may be moved elsewhere
as desired.</p>
<p>In the <code class="docutils literal"><span class="pre">geomesa-tools-$VERSION</span></code> directory, run <code class="docutils literal"><span class="pre">bin/geomesa</span> <span class="pre">configure</span></code> to set up the tools.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span><span class="c1">### in geomesa-$VERSION/dist/tools/geomesa-tools-$VERSION:</span>
$ bin/geomesa configure
Warning: GEOMESA_HOME is not set, using /path/to/geomesa-<span class="nv">$VERSION</span>/dist/tools/geomesa-tools-<span class="nv">$VERSION</span>
Using GEOMESA_HOME as set: /path/to/geomesa-<span class="nv">$VERSION</span>/dist/tools/geomesa-tools-<span class="nv">$VERSION</span>
Is this intentional? Y<span class="se">\n</span> y
Warning: GEOMESA_LIB already set, probably by a prior configuration.
Current value is /path/to/geomesa-<span class="nv">$VERSION</span>/dist/tools/geomesa-tools-<span class="nv">$VERSION</span>/lib.

Is this intentional? Y<span class="se">\n</span> y

To persist the configuration please update your bashrc file to include:
<span class="nb">export</span> <span class="nv">GEOMESA_HOME</span><span class="o">=</span>/path/to/geomesa-<span class="nv">$VERSION</span>/dist/tools/geomesa-tools-<span class="nv">$VERSION</span>
<span class="nb">export</span> <span class="nv">PATH</span><span class="o">=</span><span class="si">${</span><span class="nv">GEOMESA_HOME</span><span class="si">}</span>/bin:<span class="nv">$PATH</span>
</pre></div>
</div>
<p>Update and re-source your <code class="docutils literal"><span class="pre">~/.bashrc</span></code> file to include the <code class="docutils literal"><span class="pre">$GEOMESA_HOME</span></code> and <code class="docutils literal"><span class="pre">$PATH</span></code> updates.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Please note that the <code class="docutils literal"><span class="pre">$GEOMESA_HOME</span></code> variable points to the location of the <code class="docutils literal"><span class="pre">geomesa-tools-$VERSION</span></code>
directory, not the main geomesa binary distribution directory!</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p><code class="docutils literal"><span class="pre">geomesa</span></code> will read the <code class="docutils literal"><span class="pre">$ACCUMULO_HOME</span></code> and <code class="docutils literal"><span class="pre">$HADOOP_HOME</span></code> environment variables to load the
appropriate JAR files for Hadoop, Accumulo, Zookeeper, and Thrift. If possible, we recommend
installing the tools on the Accumulo master server, as you may also need various configuration
files from Hadoop/Accumulo in order to run certain commands. Use the <code class="docutils literal"><span class="pre">geomesa</span> <span class="pre">classpath</span></code>
command in order to see what JARs are being used.</p>
<p class="last">If you are running the tools on a system without
Accumulo installed and configured, the <code class="docutils literal"><span class="pre">install-hadoop-accumulo.sh</span></code> script
in the <code class="docutils literal"><span class="pre">bin</span></code> directory may be used to download the needed Hadoop/Accumulo JARs into
the <code class="docutils literal"><span class="pre">lib</span></code> directory. You should edit this script to match the versions used by your
installation.</p>
</div>
<p>Due to licensing restrictions, dependencies for shape file support and raster
ingest must be separately installed. Do this with the following commands:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ bin/install-jai.sh
$ bin/install-jline.sh
</pre></div>
</div>
<p>Test the command that invokes the GeoMesa Tools:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ geomesa
Using <span class="nv">GEOMESA_HOME</span> <span class="o">=</span> /path/to/geomesa-<span class="nv">$VERSION</span>
Usage: geomesa <span class="o">[</span>command<span class="o">]</span> <span class="o">[</span><span class="nb">command</span> options<span class="o">]</span>
  Commands:
    create           Create a feature definition in a GeoMesa catalog
    deletecatalog    Delete a GeoMesa catalog completely <span class="o">(</span>and all features in it<span class="o">)</span>
    deleteraster     Delete a GeoMesa Raster Table
    describe         Describe the attributes of a given feature in GeoMesa
    env              Examine the current GeoMesa environment
    explain          Explain how a GeoMesa query will be executed
    <span class="nb">export</span>           Export a GeoMesa feature
    getsft           Get the SimpleFeatureType of a feature
    <span class="nb">help</span>             Show <span class="nb">help</span>
    ingest           Ingest a file of various formats into GeoMesa
    ingestraster     Ingest a raster file or raster files in a directory into GeoMesa
    keywords         Add/remove keywords on an existing schema
    list             List GeoMesa features <span class="k">for</span> a given catalog
    queryrasterstats Export queries and statistics about the last X number of queries to a CSV file.
    removeschema     Remove a schema and associated features from a GeoMesa catalog
    stats-analyze    Analyze statistics on a GeoMesa feature <span class="nb">type</span>
    stats-bounds     View bounds on attributes in a GeoMesa schema
    stats-count      View feature counts in a GeoMesa schema
    stats-enumerate  Enumerate attribute values in a GeoMesa feature <span class="nb">type</span>
    stats-histogram  View statistics on a GeoMesa feature <span class="nb">type</span>
    tableconf        Perform table configuration operations
    version          GeoMesa Version
</pre></div>
</div>
<p>GeoMesa Tools comes bundled by default with an SLF4J implementation that is installed to the <code class="docutils literal"><span class="pre">$GEOMESA_HOME/lib</span></code> directory
named <code class="docutils literal"><span class="pre">slf4j-log4j12-1.7.5.jar</span></code>. If you already have an SLF4J implementation installed on your Java classpath you may
see errors at runtime and will have to exclude one of the JARs. This can be done by simply renaming the bundled
<code class="docutils literal"><span class="pre">slf4j-log4j12-1.7.5.jar</span></code> file to <code class="docutils literal"><span class="pre">slf4j-log4j12-1.7.5.jar.exclude</span></code>.</p>
<p>Note that if no slf4j implementation is installed you will see this error:</p>
<div class="code highlight-python"><div class="highlight"><pre><span></span>SLF4J: Failed to load class &quot;org.slf4j.impl.StaticLoggerBinder&quot;.
SLF4J: Defaulting to no-operation (NOP) logger implementation
SLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder for further details.
</pre></div>
</div>
<p>In this case you may download SLF4J from <a class="reference external" href="http://www.slf4j.org/download.html">http://www.slf4j.org/download.html</a>. Extract
<code class="docutils literal"><span class="pre">slf4j-log4j12-1.7.7.jar</span></code> and place it in the <code class="docutils literal"><span class="pre">lib</span></code> directory of the binary distribution.
If this conflicts with another SLF4J implementation, you may need to remove it from the <code class="docutils literal"><span class="pre">lib</span></code> directory.</p>
</div>
<div class="section" id="installing-the-geomesa-geoserver-plugins">
<span id="install-geoserver-plugins"></span><h2>Installing the GeoMesa GeoServer Plugins<a class="headerlink" href="#installing-the-geomesa-geoserver-plugins" title="Permalink to this headline">¶</a></h2>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">The GeoMesa GeoServer plugins require the use of GeoServer
2.8.1 and GeoTools 14.1.</p>
</div>
<p>As described in section <a class="reference internal" href="architecture.html#geomesa-and-geoserver"><span>GeoMesa and GeoServer</span></a>, GeoMesa implements a
<a class="reference external" href="http://geotools.org/">GeoTools</a>-compatible data store. This makes it possible
to use GeoMesa as a data store in <a class="reference external" href="http://geoserver.org">GeoServer</a>. The documentation
below describes how to configure GeoServer to connect to GeoMesa Accumulo and Kafka data stores.
GeoServer&#8217;s web site includes <a class="reference external" href="http://docs.geoserver.org/latest/en/user/installation/index.html">installation instructions for GeoServer</a>.</p>
<p>After GeoServer is running, you will also need to install the WPS plugin to
your GeoServer instance. The GeoServer WPS Plugin must match the version of
GeoServer instance. This is needed for both the Accumulo and Kafka variants of
the plugin. The GeoServer website includes <a class="reference external" href="http://docs.geoserver.org/stable/en/user/extensions/wps/install.html">instructions for downloading and installing</a> the WPS plugin.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>If using Tomcat as a web server, it will most likely be necessary to
pass some custom options:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>export CATALINA_OPTS=&quot;-Xmx8g -XX:MaxPermSize=512M -Duser.timezone=UTC -server -Djava.awt.headless=true&quot;
</pre></div>
</div>
<p class="last">The value of <code class="docutils literal"><span class="pre">-Xmx</span></code> should be as large as your system will permit; this
is especially important for the Kafka plugin. You
should also consider passing <code class="docutils literal"><span class="pre">-DGEOWEBCACHE_CACHE_DIR=/tmp/$USER-gwc</span></code>
and <code class="docutils literal"><span class="pre">-DEPSG-HSQL.directory=/tmp/$USER-hsql</span></code>
as well. Be sure to restart Tomcat for changes to take place.</p>
</div>
<div class="section" id="for-accumulo">
<span id="install-accumulo-geoserver"></span><h3>For Accumulo<a class="headerlink" href="#for-accumulo" title="Permalink to this headline">¶</a></h3>
<p>To install the GeoMesa Accumulo GeoServer plugin, unpack the contents of the
<code class="docutils literal"><span class="pre">geomesa-accumulo-gs-plugin-$VERSION.tar.gz</span></code> file in <code class="docutils literal"><span class="pre">geomesa-$VERSION/dist/gs-plugins</span></code>
into your GeoServer&#8217;s <code class="docutils literal"><span class="pre">lib</span></code> directory (<code class="docutils literal"><span class="pre">$VERSION</span></code> = 1.2.4-SNAPSHOT):</p>
<p>If you are using Tomcat:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ tar -xzvf <span class="se">\</span>
  geomesa-<span class="nv">$VERSION</span>/dist/gs-plugins/geomesa-accumulo-gs-plugin-<span class="nv">$VERSION</span>-install.tar.gz <span class="se">\</span>
  -C /path/to/tomcat/webapps/geoserver/WEB-INF/lib/
</pre></div>
</div>
<p>If you are using GeoServer&#8217;s built in Jetty web server:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ tar -xzvf <span class="se">\</span>
  geomesa-<span class="nv">$VERSION</span>/dist/gs-plugins/geomesa-accumulo-gs-plugin-<span class="nv">$VERSION</span>-install.tar.gz <span class="se">\</span>
  -C /path/to/geoserver/webapps/geoserver/WEB-INF/lib/
</pre></div>
</div>
<p>There are additional JARs for Accumulo, Zookeeper, Hadoop, and Thrift that will
be specific to your installation that you will also need to copy to GeoServer&#8217;s
<code class="docutils literal"><span class="pre">WEB-INF/lib</span></code> directory. For example, GeoMesa only requires Hadoop
2.2 or better, but if you are using Hadoop 2.5.0 you should use the JARs
that match the version of Hadoop you are running.</p>
<p>There is a script in the <code class="docutils literal"><span class="pre">geomesa-tools-$VERSION</span></code> directory
(<code class="docutils literal"><span class="pre">$GEOMESA_HOME/bin/install-hadoop-accumulo.sh</span></code>) which will install these
dependencies to a target directory using <code class="docutils literal"><span class="pre">wget</span></code> (requires an internet
connection).</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You may have to edit the <code class="docutils literal"><span class="pre">install-hadoop-accumulo.sh</span></code> script to set the
versions of Accumulo, Zookeeper, Hadoop, and Thrift you are running.</p>
</div>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ <span class="nv">$GEOMESA_HOME</span>/bin/install-hadoop-accumulo.sh /path/to/tomcat/webapps/geoserver/WEB-INF/lib/
Install accumulo and hadoop dependencies to /path/to/tomcat/webapps/geoserver/WEB-INF/lib/?
Confirm? <span class="o">[</span>Y/n<span class="o">]</span>y
fetching https://search.maven.org/remotecontent?filepath<span class="o">=</span>org/apache/accumulo/accumulo-core/1.6.5/accumulo-core-1.6.5.jar
--2015-09-29 15:06:48--  https://search.maven.org/remotecontent?filepath<span class="o">=</span>org/apache/accumulo/accumulo-core/1.6.5/accumulo-core-1.6.5.jar
Resolving search.maven.org <span class="o">(</span>search.maven.org<span class="o">)</span>... 207.223.241.72
Connecting to search.maven.org <span class="o">(</span>search.maven.org<span class="o">)</span><span class="p">|</span>207.223.241.72<span class="p">|</span>:443... connected.
HTTP request sent, awaiting response... <span class="m">200</span> OK
Length: <span class="m">4646545</span> <span class="o">(</span>4.4M<span class="o">)</span> <span class="o">[</span>application/java-archive<span class="o">]</span>
Saving to: ‘/path/to/tomcat/webapps/geoserver/WEB-INF/lib/accumulo-core-1.6.5.jar’
...
</pre></div>
</div>
<p>If you do no have an internet connection you can download the JARs manually via <a class="reference external" href="http://search.maven.org/">http://search.maven.org/</a>.
These may include the JARs below; the specific JARs needed for some common configurations are listed below:</p>
<p>Accumulo 1.5</p>
<ul class="simple">
<li>accumulo-core-1.5.4.jar</li>
<li>accumulo-fate-1.5.4.jar</li>
<li>accumulo-start-1.5.4.jar</li>
<li>accumulo-trace-1.5.4.jar</li>
<li>libthrift-0.9.0.jar</li>
<li>zookeeper-3.3.6.jar</li>
</ul>
<p>Accumulo 1.6</p>
<ul class="simple">
<li>accumulo-core-1.6.5.jar</li>
<li>accumulo-fate-1.6.5.jar</li>
<li>accumulo-server-base-1.6.5.jar</li>
<li>accumulo-trace-1.6.5.jar</li>
<li>accumulo-start-1.6.5.jar</li>
<li>libthrift-0.9.1.jar</li>
<li>zookeeper-3.4.6.jar</li>
<li>commons-vfs2-2.0.jar</li>
</ul>
<p>Accumulo 1.7+ (note the addition of htrace)</p>
<ul class="simple">
<li>accumulo-core-1.7.1.jar</li>
<li>accumulo-fate-1.7.1.jar</li>
<li>accumulo-server-base-1.7.1.jar</li>
<li>accumulo-trace-1.7.1.jar</li>
<li>accumulo-start-1.7.1.jar</li>
<li>libthrift-0.9.1.jar</li>
<li>zookeeper-3.4.6.jar</li>
<li>htrace-core-3.1.0-incubating.jar</li>
<li>commons-vfs2-2.1.jar</li>
</ul>
<p>Hadoop 2.2</p>
<ul class="simple">
<li>commons-configuration-1.6.jar</li>
<li>hadoop-auth-2.2.0.jar</li>
<li>hadoop-client-2.2.0.jar</li>
<li>hadoop-common-2.2.0.jar</li>
<li>hadoop-hdfs-2.2.0.jar</li>
</ul>
<p>Hadoop 2.4-2.7 (adjust versions as needed)</p>
<ul class="simple">
<li>commons-configuration-1.6.jar</li>
<li>hadoop-auth-2.6.4.jar</li>
<li>hadoop-client-2.6.4.jar</li>
<li>hadoop-common-2.6.4.jar</li>
<li>hadoop-hdfs-2.6.4.jar</li>
</ul>
<p>Restart GeoServer after the JARs are installed.</p>
</div>
<div class="section" id="for-kafka">
<span id="install-kafka-geoserver"></span><h3>For Kafka<a class="headerlink" href="#for-kafka" title="Permalink to this headline">¶</a></h3>
<p>The GeoMesa GeoServer plugin for Kafka 0.8.2 is found in the <code class="docutils literal"><span class="pre">geomesa-kafka-gs-plugin-$VERSION-install.tar.gz</span></code>
file in <code class="docutils literal"><span class="pre">geomesa-$VERSION/dist/gs-plugins</span></code> in the binary distribution, or is built in
the <code class="docutils literal"><span class="pre">geomesa-gs-plugin/geomesa-kafka-gs-plugin</span></code> directory of the source distribution.</p>
<p>The GeoMesa GeoServer plugin for Kafka 0.9 is found in <code class="docutils literal"><span class="pre">geomesa-kafka-09-gs-plugin-$VERSION-install.tar.gz</span></code>
(downloaded here: <a class="reference external" href="https://repo.locationtech.org/content/repositories/geomesa-releases/org/locationtech/geomesa/geomesa-kafka-09-gs-plugin/1.2.3/geomesa-kafka-09-gs-plugin-1.2.3-install.tar.gz">https://repo.locationtech.org/content/repositories/geomesa-releases/org/locationtech/geomesa/geomesa-kafka-09-gs-plugin/1.2.3/geomesa-kafka-09-gs-plugin-1.2.3-install.tar.gz</a>), or is built in the
<code class="docutils literal"><span class="pre">geomesa-gs-plugin/geomesa-kafka-09-gs-plugin</span></code> directory of the source distribution.</p>
<p>In either case, the contents of the appropriate archive should be unpacked in the GeoServer
<code class="docutils literal"><span class="pre">WEB-INF/lib</span></code> directory. If you are using Tomcat:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ tar -xzvf <span class="se">\</span>
  geomesa-<span class="nv">$VERSION</span>/dist/gs-plugins/geomesa-kafka-gs-plugin-<span class="nv">$VERSION</span>-install.tar.gz <span class="se">\</span>
  -C /path/to/tomcat/webapps/geoserver/WEB-INF/lib/
</pre></div>
</div>
<p>If you are using GeoServer&#8217;s built in Jetty web server:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ tar -xzvf <span class="se">\</span>
  geomesa-<span class="nv">$VERSION</span>/dist/gs-plugins/geomesa-kafka-gs-plugin-<span class="nv">$VERSION</span>-install.tar.gz <span class="se">\</span>
  -C /path/to/geoserver/webapps/geoserver/WEB-INF/lib/
</pre></div>
</div>
<p>This will install the JARs for the Kafka GeoServer plugin and most of its dependencies.
However, you will also need additional JARs for Kafka and Zookeeper that will
be specific to your installation that you will also need to copy to GeoServer&#8217;s
<code class="docutils literal"><span class="pre">WEB-INF/lib</span></code> directory. For example, GeoMesa only requires Kafka 0.8.2 or 0.9,
but if you are using Kafka 0.9.0 you should use the JARs that match the version of
Kafka you are running.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">GeoMesa 1.2.4-SNAPSHOT depends on Scala 2.11, so you should make sure you use the
Kafka version built with Scala 2.11 as well (<code class="docutils literal"><span class="pre">kafka_2.11_*</span></code>) to avoid
compatibility issues.</p>
</div>
<p>Copy these additional dependencies (or the equivalents for your Kafka installation) to
your GeoServer <code class="docutils literal"><span class="pre">WEB-INF/lib</span></code> directory.</p>
<ul>
<li><dl class="first docutils">
<dt>Kafka</dt>
<dd><ul class="first last simple">
<li>kafka-clients-0.8.2.1.jar</li>
<li>kafka_2.11-0.8.2.1.jar</li>
<li>metrics-core-2.2.0.jar</li>
<li>zkclient-0.3.jar</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Zookeeper</dt>
<dd><ul class="first last simple">
<li>zookeeper-3.4.5.jar</li>
</ul>
</dd>
</dl>
</li>
</ul>
<p>There is a script in the <code class="docutils literal"><span class="pre">geomesa-tools-$VERSION</span></code> directory
(<code class="docutils literal"><span class="pre">$GEOMESA_HOME/bin/install-kafka.sh</span></code>) which will install these
dependencies to a target directory using <code class="docutils literal"><span class="pre">wget</span></code> (requires an internet
connection).</p>
<p>Restart GeoServer after the JARs are installed.</p>
</div>
<div class="section" id="for-hbase">
<span id="install-hbase-geoserver"></span><h3>For HBase<a class="headerlink" href="#for-hbase" title="Permalink to this headline">¶</a></h3>
<p>The HBase GeoServer plugin is not bundled by default in the GeoMesa binary distribution
and should be built from source. Download the source distribution (see
<a class="reference internal" href="../developer/introduction.html#building-from-source"><span>Building from Source</span></a>), go to the <code class="docutils literal"><span class="pre">geomesa-gs-plugin/geomesa-hbase-gs-plugin</span></code>
directory, and build the module using the <code class="docutils literal"><span class="pre">hbase</span></code> Maven profile:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ mvn clean install -Phbase
</pre></div>
</div>
<p>After building, extract <code class="docutils literal"><span class="pre">target/geomesa-hbase-gs-plugin-$VERSION-install.tar.gz</span></code> into GeoServer&#8217;s
<code class="docutils literal"><span class="pre">WEB-INF/lib</span></code> directory. Note that this plugin contains a shaded JAR with HBase 1.1.5
bundled. If you require a different version, modify the <code class="docutils literal"><span class="pre">pom.xml</span></code> and rebuild following
the instructions above.</p>
<p>This distribution does not include the Hadoop or Zookeeper JARs; the following JARs
should be copied from the <code class="docutils literal"><span class="pre">lib</span></code> directory of your HBase or Hadoop installations into
GeoServer&#8217;s <code class="docutils literal"><span class="pre">WEB-INF/lib</span></code> directory:</p>
<blockquote>
<div><ul class="simple">
<li>hadoop-annotations-2.5.1.jar</li>
<li>hadoop-auth-2.5.1.jar</li>
<li>hadoop-common-2.5.1.jar</li>
<li>hadoop-mapreduce-client-core-2.5.1.jar</li>
<li>hadoop-yarn-api-2.5.1.jar</li>
<li>hadoop-yarn-common-2.5.1.jar</li>
<li>zookeeper-3.4.6.jar</li>
<li>commons-configuration-1.6.jar</li>
</ul>
</div></blockquote>
<p>(Note the versions may vary depending on your installation.)</p>
<p>The HBase data store requires the configuration file <code class="docutils literal"><span class="pre">hbase-site.xml</span></code> to be on the classpath. This can
be accomplished by placing the file in <code class="docutils literal"><span class="pre">geoserver/WEB-INF/classes</span></code> (you should make the directory if it
doesn&#8217;t exist).</p>
<p>Restart GeoServer after the JARs are installed.</p>
</div>
<div class="section" id="for-cassandra">
<span id="install-cassandra-geoserver"></span><h3>For Cassandra<a class="headerlink" href="#for-cassandra" title="Permalink to this headline">¶</a></h3>
<p>The Cassandra GeoServer plugin is not bundled by default in the GeoMesa binary distribution
and should be built from source. Download the source distribution (see
<a class="reference internal" href="../developer/introduction.html#building-from-source"><span>Building from Source</span></a>), go to the <code class="docutils literal"><span class="pre">geomesa-gs-plugin/geomesa-cassandra-gs-plugin</span></code>
directory, and build the module:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ mvn clean install
</pre></div>
</div>
<p>After building, extract <code class="docutils literal"><span class="pre">target/geomesa-cassandra-gs-plugin-$VERSION-install.tar.gz</span></code> into GeoServer&#8217;s
<code class="docutils literal"><span class="pre">WEB-INF/lib</span></code> directory.</p>
<p>Restart GeoServer after the JARs are installed.</p>
</div>
</div>
<div class="section" id="upgrading">
<h2>Upgrading<a class="headerlink" href="#upgrading" title="Permalink to this headline">¶</a></h2>
<p>To upgrade between minor releases of GeoMesa, the versions of all GeoMesa components
<strong>must</strong> match. This means that the version of the <code class="docutils literal"><span class="pre">geomesa-distributed-runtime</span></code>
JAR installed on Accumulo tablet servers <strong>must</strong> match the version of the
<code class="docutils literal"><span class="pre">geomesa-plugin</span></code> JARs installed in the <code class="docutils literal"><span class="pre">WEB-INF/lib</span></code> directory of GeoServer.</p>
<p>We strive to maintain backwards compatibility for data ingested with older
releases of GeoMesa, and in general data ingested with older releases
may be read with newer ones (note that the reverse does not apply). For example,
data ingested into Accumulo with GeoMesa 1.2.2 may be read with 1.2.3.</p>
<p>It should be noted, however, that data ingested with older GeoMesa versions may
not take full advantage of indexing improvements in newer releases. If
it is not feasible to reingest old data, see <a class="reference internal" href="jobs.html#update-index-format-job"><span>Updating Existing Data to the Latest Index Format</span></a>
for more information on updating its index format.</p>
</div>
<div class="section" id="security-concerns">
<h2>Security Concerns<a class="headerlink" href="#security-concerns" title="Permalink to this headline">¶</a></h2>
<div class="section" id="apache-commons-collections">
<h3>Apache Commons Collections<a class="headerlink" href="#apache-commons-collections" title="Permalink to this headline">¶</a></h3>
<p>Version 3.2.1 and earlier of the Apache Commons Collections library have a CVSS 10.0 vulnerability.  Read more <a class="reference external" href="https://commons.apache.org/proper/commons-collections/security-reports.html">here</a>.</p>
<p>Note that Accumulo 1.6.5 is the first version of Accumulo which addresses this security concern.
Fixes for the GeoServer project will be available in versions 2.8.3+ and 2.9.0+.</p>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="datastores.html" class="btn btn-neutral float-right" title="GeoMesa Data Stores" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="architecture.html" class="btn btn-neutral" title="Architecture Overview" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2013-2016 Commonwealth Computer Research, Inc.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.2.4-SNAPSHOT',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>