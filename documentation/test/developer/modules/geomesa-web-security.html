<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>geomesa-web-security &mdash; GeoMesa 1.2.0 Manuals</title>
    
    <link rel="stylesheet" href="../../_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '1.2.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="GeoMesa 1.2.0 Manuals" href="../../index.html" />
    <link rel="up" title="Modules" href="../modules.html" />
    <link rel="next" title="GeoMesa 1.2.0 Tutorials" href="../../tutorials/index.html" />
    <link rel="prev" title="geomesa-web-data" href="geomesa-web-data.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../tutorials/index.html" title="GeoMesa 1.2.0 Tutorials"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="geomesa-web-data.html" title="geomesa-web-data"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">GeoMesa 1.2.0 Manuals</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >GeoMesa 1.2.0 Developer Manual</a> &raquo;</li>
          <li class="nav-item nav-item-2"><a href="../modules.html" accesskey="U">Modules</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="geomesa-web-data.html"
                        title="previous chapter">geomesa-web-data</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="../../tutorials/index.html"
                        title="next chapter">GeoMesa 1.2.0 Tutorials</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/developer/modules/geomesa-web-security.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="geomesa-web-security">
<h1>geomesa-web-security<a class="headerlink" href="#geomesa-web-security" title="Permalink to this headline">Â¶</a></h1>
<p>GeoMesa Web Security provides Accumulo security to data stores within
GeoServer, particularly the KafkaDataStore but it works for any data
store using the
<code class="docutils literal"><span class="pre">org.locationtech.geomesa.utils.security.DataStoreSecurityService</span></code>.
The easiest way for a data store to use this service is to modify the
<code class="docutils literal"><span class="pre">FeatureSource</span></code> to extend
<code class="docutils literal"><span class="pre">org.locationtech.geomesa.utils.geotools.ContentFeatureSourceSecuritySupport</span></code>.
Alternatively, the data store may call
<code class="docutils literal"><span class="pre">org.locationtech.geomesa.utils.security.DataStoreSecurityService.provider.secure(obj)</span></code>
which will provide a security wrapper around <code class="docutils literal"><span class="pre">obj</span></code> where <code class="docutils literal"><span class="pre">obj</span></code> may
be a <code class="docutils literal"><span class="pre">FeatureSource</span></code>, <code class="docutils literal"><span class="pre">FeatureReader</span></code>, or a <code class="docutils literal"><span class="pre">FeatureCollection</span></code>.</p>
<p>To deploy the module, copy the <code class="docutils literal"><span class="pre">geomesa-web-security-$VERSION.jar</span></code> and
dependencies to <code class="docutils literal"><span class="pre">$GEOSERVER_WEB_APP_HOME/WEB-INF/lib</span></code> and restart
GeoServer. Any data store using the <code class="docutils literal"><span class="pre">DataStoreSecurityService</span></code> will
then have an Accumulo visibility filter applied to SimpleFeatures. The
visibility property in the simple feature <code class="docutils literal"><span class="pre">user</span> <span class="pre">data</span></code> will be compared
to the current user&#8217;s authorizations to determine if the user has access
to the simple feature or not. Any simple feature with no visibility will
be inaccessible to all users. This behavior differs from Accumulo where
entries without a visibility marking are accessible to all users.</p>
<p>The <code class="docutils literal"><span class="pre">DataStoreSecurityService</span></code> provides read security. The data store
should be additionally configured in GeoServer to be read-only. To
configure read only access, log into GeoServer using administrator
credentials. Then select &#8220;Data&#8221; under &#8220;Security&#8221; on the left side menu.
Set the &#8220;Catalog Mode&#8221; to &#8220;Hide&#8221;. Next, click the default &#8220;<em>.</em>.w&#8221; rule
and add the roles &#8220;ADMIN&#8221; and optionally &#8220;GROUP_ADMIN&#8221;. Without this
all users will have write access by default. Finally, create a new rule
for the workspace and layer that you want to control access to. Set the
access mode to &#8220;Read&#8221; and add all roles (i.e. visibility labels) that
exist in the dataset. Don&#8217;t forget to click &#8220;Save&#8221; on the main &#8220;Data
Security&#8221; page when you&#8217;re done.</p>
<p>To add additional users and roles select &#8220;User, Groups, Roles&#8221; under
&#8220;Security&#8221; on the left side menu.</p>
<p>See <code class="docutils literal"><span class="pre">org.locationtech.geomesa.security.SecurityUtils</span></code> for more details
on how to get and set visibilities on a SimpleFeature</p>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../tutorials/index.html" title="GeoMesa 1.2.0 Tutorials"
             >next</a> |</li>
        <li class="right" >
          <a href="geomesa-web-data.html" title="geomesa-web-data"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">GeoMesa 1.2.0 Manuals</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >GeoMesa 1.2.0 Developer Manual</a> &raquo;</li>
          <li class="nav-item nav-item-2"><a href="../modules.html" >Modules</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2015, GeoMesa.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.3.
    </div>
  </body>
</html>