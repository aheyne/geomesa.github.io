<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>GeoMesa Transformations &mdash; GeoMesa 1.2.0 Manuals</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.3.4/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.3.4/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.2.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.3.4/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="GeoMesa 1.2.0 Manuals" href="../index.html" />
    <link rel="up" title="GeoMesa 1.2.0 Tutorials" href="index.html" />
    <link rel="next" title="Apache Spark Analysis" href="spark.html" />
    <link rel="prev" title="GeoMesa Raster Support" href="geomesa-raster.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body role="document">

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../index.html">
          GeoMesa</a>
        <span class="navbar-text navbar-version pull-left"><b>1.2.0</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../user/index.html">GeoMesa 1.2.0 User Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developer/index.html">GeoMesa 1.2.0 Developer Manual</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">GeoMesa 1.2.0 Tutorials</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">GeoMesa Transformations</a><ul>
<li><a class="reference internal" href="#prerequisites">Prerequisites</a></li>
<li><a class="reference internal" href="#download-and-build-the-tutorial">Download and Build the Tutorial</a></li>
<li><a class="reference internal" href="#run-the-tutorial">Run the Tutorial</a></li>
<li><a class="reference internal" href="#insight-into-how-the-tutorial-works">Insight into How the Tutorial Works</a></li>
<li><a class="reference internal" href="#sample-code-and-output">Sample Code and Output</a><ul>
<li><a class="reference internal" href="#create-a-basic-query-with-no-projections">Create a basic query with no projections</a></li>
<li><a class="reference internal" href="#create-a-query-with-a-projection-for-two-attributes">Create a query with a projection for two attributes</a></li>
<li><a class="reference internal" href="#create-a-query-with-an-attribute-transformation">Create a query with an attribute transformation</a></li>
<li><a class="reference internal" href="#create-a-query-with-a-derived-attribute">Create a query with a derived attribute</a></li>
<li><a class="reference internal" href="#create-a-query-with-a-geometric-transformation">Create a query with a geometric transformation</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="geomesa-raster.html" title="Previous Chapter: GeoMesa Raster Support"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; GeoMesa Raste...</span>
    </a>
  </li>
  <li>
    <a href="spark.html" title="Next Chapter: Apache Spark Analysis"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">Apache Spark ... &raquo;</span>
    </a>
  </li>
              
            
            
            
            
              <li class="hidden-sm">
<div id="sourcelink">
  <a href="../_sources/tutorials/geomesa-examples-transformations.txt"
     rel="nofollow">Source</a>
</div></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12 content">
      
  <div class="section" id="geomesa-transformations">
<h1>GeoMesa Transformations<a class="headerlink" href="#geomesa-transformations" title="Permalink to this headline">¶</a></h1>
<p>GeoMesa allows users to perform <a class="reference external" href="http://en.wikipedia.org/wiki/Projection_%28relational_algebra%29">relational
projections</a>
on query results. We call these &#8220;transformations&#8221; to distinguish them
from the overloaded term &#8220;projection&#8221; which has a different meaning in a
spatial context. These transformations have the following uses and
advantages:</p>
<ol class="arabic simple">
<li>Subset to specified columns - reduces network overhead of returning
results</li>
<li>Rename specified columns - alters the schema of data on the fly</li>
<li>Compute new attributes from one or more original attributes - adds
derived fields to results</li>
</ol>
<p>The transformations are applied in parallel across the cluster thus
making them very fast. They are analogous to the map tasks in a
map-reduce job. Transformations are also extensible; developers can
implement new functions and plug them into the system using standard
mechanisms from <a class="reference external" href="http://www.geotools.org/">GeoTools</a>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">When this tutorial refers to &#8220;projections&#8221;, it means in the
relational sense - see <a class="reference external" href="http://en.wikipedia.org/wiki/Projection_(relational_algebra)">Projection - Relational
Algebra</a>.
Projection also has <a class="reference external" href="http://en.wikipedia.org/wiki/Projection_(disambiguation)">many other
meanings</a>
in spatial discussions - they are not used in this tutorial. Although
projections can also modify an attribute&#8217;s value, in this tutorial we
will refer to such modifications as &#8220;transformations&#8221; to keep things
clearer.</p>
</div>
<p>This tutorial will show you how to write custom Java code using GeoMesa
to do the following:</p>
<ol class="arabic simple">
<li>Query previously-ingested data.</li>
<li>Apply <a class="reference external" href="http://en.wikipedia.org/wiki/Projection_%28relational_algebra%29">relational
projections</a>
to your query results.</li>
<li>Apply transformations to your query results.</li>
</ol>
<div class="section" id="prerequisites">
<h2>Prerequisites<a class="headerlink" href="#prerequisites" title="Permalink to this headline">¶</a></h2>
<p>You will need:</p>
<ul class="simple">
<li>an instance of Accumulo 1.5 or 1.6 running on Hadoop 2.2.x</li>
<li>an Accumulo user that has appropriate permissions to query your data</li>
<li>Java JDK 7</li>
<li><a class="reference external" href="http://maven.apache.org/">Apache Maven</a> 3.2.2 or better</li>
<li>a <a class="reference external" href="http://git-scm.com/">git</a> client</li>
</ul>
<p>This tutorial queries the GDELT data set. Instructions on ingesting
GDELT data are available in the <a class="reference internal" href="geomesa-examples-gdelt.html"><em>Map-Reduce Ingest of GDELT</em></a> tutorial.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Before continuing, ingest the GDELT data set described in
the GeoMesa GDELT <a class="reference internal" href="geomesa-examples-gdelt.html"><em>Map-Reduce Ingest of GDELT</em></a>.</p>
</div>
</div>
<div class="section" id="download-and-build-the-tutorial">
<h2>Download and Build the Tutorial<a class="headerlink" href="#download-and-build-the-tutorial" title="Permalink to this headline">¶</a></h2>
<p>Pick a reasonable directory on your machine, and run:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>git clone git@github.com:geomesa/geomesa-tutorials.git
<span class="nv">$ </span><span class="nb">cd </span>geomesa-tutorials
</pre></div>
</div>
<p>To build, run</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>mvn clean install -pl geomesa-examples-transformations
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Ensure that the version of Accumulo, Hadoop, etc in
the root <code class="docutils literal"><span class="pre">pom.xml</span></code> match your environment.</p>
<p class="last">Depending on the version, you may also need to build
GeoMesa locally. Instructions can be found in
<a class="reference internal" href="../user/installation_and_configuration.html"><em>Installation and Configuration</em></a>.</p>
</div>
</div>
<div class="section" id="run-the-tutorial">
<h2>Run the Tutorial<a class="headerlink" href="#run-the-tutorial" title="Permalink to this headline">¶</a></h2>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Before continuing, ensure that you have ingested the GDELT
data set described in the <a class="reference internal" href="geomesa-examples-gdelt.html"><em>Map-Reduce Ingest of GDELT</em></a>
tutorial.</p>
</div>
<p>On the command line, run:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>java -cp geomesa-examples-transformations/target/geomesa-examples-transformations-&lt;version&gt;.jar <span class="se">\</span>
    com.example.geomesa.transformations.QueryTutorial <span class="se">\</span>
    -instanceId &lt;instance&gt;                            <span class="se">\</span>
    -zookeepers &lt;zoos&gt;                                <span class="se">\</span>
    -user &lt;user&gt;                                      <span class="se">\</span>
    -password &lt;<span class="nb">pwd</span>&gt;                                   <span class="se">\</span>
    -tableName &lt;table&gt;                                <span class="se">\</span>
    -featureName &lt;feature&gt;
</pre></div>
</div>
<p>where you provide the following arguments:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">&lt;instance&gt;</span></code> the name of your Accumulo instance</li>
<li><code class="docutils literal"><span class="pre">&lt;zoos&gt;</span></code> comma-separated list of your Zookeeper nodes, e.g.
<code class="docutils literal"><span class="pre">zoo1:2181,zoo2:2181,zoo3:2181</span></code></li>
<li><code class="docutils literal"><span class="pre">&lt;user&gt;</span></code> the name of an Accumulo user that will execute the scans,
e.g. <code class="docutils literal"><span class="pre">root</span></code></li>
<li><code class="docutils literal"><span class="pre">&lt;pwd&gt;</span></code> the password for the previously-mentioned Accumulo user</li>
<li><code class="docutils literal"><span class="pre">&lt;table&gt;</span></code> the name of the Accumulo table that has the GeoMesa GDELT
dataset, e.g. <code class="docutils literal"><span class="pre">gdelt</span></code> if you followed the GDELT tutorial</li>
<li><code class="docutils literal"><span class="pre">&lt;feature&gt;</span></code> the feature name used to ingest the GeoMesa GDELT
dataset, e.g. <code class="docutils literal"><span class="pre">event</span></code> if you followed the GDELT tutorial</li>
</ul>
<p>You should see several queries run and the results printed out to your
console.</p>
</div>
<div class="section" id="insight-into-how-the-tutorial-works">
<h2>Insight into How the Tutorial Works<a class="headerlink" href="#insight-into-how-the-tutorial-works" title="Permalink to this headline">¶</a></h2>
<p>The code for querying and projections is available in the class
<code class="docutils literal"><span class="pre">com.example.geomesa.transformations.QueryTutorial</span></code>. The source code
is meant to be accessible, but the following is a high-level breakdown
of the relevant methods:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">basicQuery</span></code> executes a base filter without any further options.
All attributes are returned in the data set.</li>
<li><code class="docutils literal"><span class="pre">basicProjectionQuery</span></code> executes a base filter but specifies a
subset of attributes to return.</li>
<li><code class="docutils literal"><span class="pre">basicTransformationQuery</span></code> executes a base filter and transforms
one of the attributes that is returned.</li>
<li><code class="docutils literal"><span class="pre">renamedTransformationQuery</span></code> executes a base filter and transforms
one of the attributes, returning it in a separate derived attribute.</li>
<li><code class="docutils literal"><span class="pre">mutliFieldTransformationQuery</span></code> executes a base filter and
transforms two attributes into a single derived attributes.</li>
<li><code class="docutils literal"><span class="pre">geometricTransformationQuery</span></code> executes a base filter and
transforms the geometry returned from a point into a polygon by
buffering it.</li>
</ul>
<p>Additional transformation functions are listed
<a class="reference external" href="http://docs.geotools.org/latest/userguide/library/main/filter.html">here</a>.</p>
<p><em>Please note that currently not all functions are supported by GeoMesa.</em></p>
</div>
<div class="section" id="sample-code-and-output">
<h2>Sample Code and Output<a class="headerlink" href="#sample-code-and-output" title="Permalink to this headline">¶</a></h2>
<p>The following code snippets show the basic aspects of creating queries
for GeoMesa.</p>
<div class="section" id="create-a-basic-query-with-no-projections">
<h3>Create a basic query with no projections<a class="headerlink" href="#create-a-basic-query-with-no-projections" title="Permalink to this headline">¶</a></h3>
<p>This query does not use any projections or transformations. Note that
all attributes are returned in the results.</p>
<div class="highlight-java"><div class="highlight"><pre><span class="n">Query</span> <span class="n">query</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Query</span><span class="o">(</span><span class="n">simpleFeatureTypeName</span><span class="o">,</span> <span class="n">cqlFilter</span><span class="o">);</span>
</pre></div>
</div>
<p><strong>Output</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="1%" />
<col width="1%" />
<col width="3%" />
<col width="1%" />
<col width="1%" />
<col width="1%" />
<col width="1%" />
<col width="2%" />
<col width="2%" />
<col width="2%" />
<col width="2%" />
<col width="2%" />
<col width="2%" />
<col width="2%" />
<col width="2%" />
<col width="2%" />
<col width="1%" />
<col width="1%" />
<col width="2%" />
<col width="2%" />
<col width="2%" />
<col width="2%" />
<col width="2%" />
<col width="2%" />
<col width="2%" />
<col width="2%" />
<col width="1%" />
<col width="1%" />
<col width="1%" />
<col width="1%" />
<col width="1%" />
<col width="2%" />
<col width="1%" />
<col width="1%" />
<col width="1%" />
<col width="1%" />
<col width="2%" />
<col width="3%" />
<col width="2%" />
<col width="2%" />
<col width="2%" />
<col width="2%" />
<col width="2%" />
<col width="2%" />
<col width="3%" />
<col width="2%" />
<col width="2%" />
<col width="2%" />
<col width="2%" />
<col width="2%" />
<col width="2%" />
<col width="3%" />
<col width="2%" />
<col width="2%" />
<col width="2%" />
<col width="2%" />
<col width="2%" />
<col width="1%" />
<col width="2%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Result</th>
<th class="head">GLOBALEVENTID</th>
<th class="head">SQLDATE</th>
<th class="head">MonthYear</th>
<th class="head">Year</th>
<th class="head">FractionDate</th>
<th class="head">Actor1Code</th>
<th class="head">Actor1Name</th>
<th class="head">Actor1CountryCode</th>
<th class="head">Actor1KnownGroupCode</th>
<th class="head">Actor1EthnicCode</th>
<th class="head">Actor1Religion1Code</th>
<th class="head">Actor1Religion2Code</th>
<th class="head">Actor1Type1Code</th>
<th class="head">Actor1Type2Code</th>
<th class="head">Actor1Type3Code</th>
<th class="head">Actor2Code</th>
<th class="head">Actor2Name</th>
<th class="head">Actor2CountryCode</th>
<th class="head">Actor2KnownGroupCode</th>
<th class="head">Actor2EthnicCode</th>
<th class="head">Actor2Religion1Code</th>
<th class="head">Actor2Religion2Code</th>
<th class="head">Actor2Type1Code</th>
<th class="head">Actor2Type2Code</th>
<th class="head">Actor2Type3Code</th>
<th class="head">IsRootEvent</th>
<th class="head">EventCode</th>
<th class="head">EventBaseCode</th>
<th class="head">EventRootCode</th>
<th class="head">QuadClass</th>
<th class="head">GoldsteinScale</th>
<th class="head">NumMentions</th>
<th class="head">NumSources</th>
<th class="head">NumArticles</th>
<th class="head">AvgTone</th>
<th class="head">Actor1Geo_Type</th>
<th class="head">Actor1Geo_FullName</th>
<th class="head">Actor1Geo_CountryCode</th>
<th class="head">Actor1Geo_ADM1Code</th>
<th class="head">Actor1Geo_Lat</th>
<th class="head">Actor1Geo_Long</th>
<th class="head">Actor1Geo_FeatureID</th>
<th class="head">Actor2Geo_Type</th>
<th class="head">Actor2Geo_FullName</th>
<th class="head">Actor2Geo_CountryCode</th>
<th class="head">Actor2Geo_ADM1Code</th>
<th class="head">Actor2Geo_Lat</th>
<th class="head">Actor2Geo_Long</th>
<th class="head">Actor2Geo_FeatureID</th>
<th class="head">ActionGeo_Type</th>
<th class="head">ActionGeo_FullName</th>
<th class="head">ActionGeo_CountryCode</th>
<th class="head">ActionGeo_ADM1Code</th>
<th class="head">ActionGeo_Lat</th>
<th class="head">ActionGeo_Long</th>
<th class="head">ActionGeo_FeatureID</th>
<th class="head">DATEADDED</th>
<th class="head">geom</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>1</td>
<td>284464526</td>
<td>Sun&nbsp;Feb&nbsp;02&nbsp;00:00:00&nbsp;EST&nbsp;2014</td>
<td>201402</td>
<td>2014</td>
<td>2014.0876</td>
<td>USA</td>
<td>UNITED&nbsp;STATES</td>
<td>USA</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>USAGOV</td>
<td>UNITED&nbsp;STATES</td>
<td>USA</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>GOV</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>0</td>
<td>010</td>
<td>010</td>
<td>01</td>
<td>1</td>
<td>0.0</td>
<td>2</td>
<td>1</td>
<td>2</td>
<td>2.6362038</td>
<td>4</td>
<td>Kyiv,&nbsp;Kyyiv,&nbsp;Misto,&nbsp;Ukraine</td>
<td>UP</td>
<td>UP12</td>
<td>50.4333</td>
<td>30.5167</td>
<td>-1044367</td>
<td>1</td>
<td>United&nbsp;States</td>
<td>US</td>
<td>US</td>
<td>38.0</td>
<td>-97.0</td>
<td>null</td>
<td>1</td>
<td>United&nbsp;States</td>
<td>US</td>
<td>US</td>
<td>38.0</td>
<td>-97.0</td>
<td>null</td>
<td>20140202</td>
<td>POINT&nbsp;(30.5167&nbsp;50.4333)</td>
</tr>
<tr class="row-odd"><td>2</td>
<td>284466704</td>
<td>Sun&nbsp;Feb&nbsp;02&nbsp;00:00:00&nbsp;EST&nbsp;2014</td>
<td>201402</td>
<td>2014</td>
<td>2014.0876</td>
<td>USAGOV</td>
<td>UNITED&nbsp;STATES</td>
<td>USA</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>GOV</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>USA</td>
<td>UNITED&nbsp;STATES</td>
<td>USA</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>1</td>
<td>036</td>
<td>036</td>
<td>03</td>
<td>1</td>
<td>4.0</td>
<td>4</td>
<td>1</td>
<td>4</td>
<td>1.5810276</td>
<td>1</td>
<td>Ukraine</td>
<td>UP</td>
<td>UP</td>
<td>49.0</td>
<td>32.0</td>
<td>null</td>
<td>1</td>
<td>Ukraine</td>
<td>UP</td>
<td>UP</td>
<td>49.0</td>
<td>32.0</td>
<td>null</td>
<td>1</td>
<td>Ukraine</td>
<td>UP</td>
<td>UP</td>
<td>49.0</td>
<td>32.0</td>
<td>null</td>
<td>20140202</td>
<td>POINT&nbsp;(32&nbsp;49)</td>
</tr>
<tr class="row-even"><td>3</td>
<td>284427971</td>
<td>Sun&nbsp;Feb&nbsp;02&nbsp;00:00:00&nbsp;EST&nbsp;2014</td>
<td>201402</td>
<td>2014</td>
<td>2014.0876</td>
<td>IGOUNO</td>
<td>UNITED&nbsp;NATIONS</td>
<td>&nbsp;</td>
<td>UNO</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>IGO</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>USA</td>
<td>UNITED&nbsp;STATES</td>
<td>USA</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>0</td>
<td>012</td>
<td>012</td>
<td>01</td>
<td>1</td>
<td>-0.4</td>
<td>27</td>
<td>3</td>
<td>27</td>
<td>1.0064903</td>
<td>4</td>
<td>Kiev,&nbsp;Ukraine&nbsp;(general),&nbsp;Ukraine</td>
<td>UP</td>
<td>UP00</td>
<td>50.4333</td>
<td>30.5167</td>
<td>-1044367</td>
<td>4</td>
<td>Kiev,&nbsp;Ukraine&nbsp;(general),&nbsp;Ukraine</td>
<td>UP</td>
<td>UP00</td>
<td>50.4333</td>
<td>30.5167</td>
<td>-1044367</td>
<td>4</td>
<td>Kiev,&nbsp;Ukraine&nbsp;(general),&nbsp;Ukraine</td>
<td>UP</td>
<td>UP00</td>
<td>50.4333</td>
<td>30.5167</td>
<td>-1044367</td>
<td>20140202</td>
<td>POINT&nbsp;(30.5167&nbsp;50.4333)</td>
</tr>
<tr class="row-odd"><td>4</td>
<td>284466607</td>
<td>Sun&nbsp;Feb&nbsp;02&nbsp;00:00:00&nbsp;EST&nbsp;2014</td>
<td>201402</td>
<td>2014</td>
<td>2014.0876</td>
<td>USAGOV</td>
<td>UNITED&nbsp;STATES</td>
<td>USA</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>GOV</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>UKR</td>
<td>UKRAINE</td>
<td>UKR</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>1</td>
<td>100</td>
<td>100</td>
<td>10</td>
<td>3</td>
<td>-5.0</td>
<td>2</td>
<td>1</td>
<td>2</td>
<td>7.826087</td>
<td>1</td>
<td>Ukraine</td>
<td>UP</td>
<td>UP</td>
<td>49.0</td>
<td>32.0</td>
<td>null</td>
<td>1</td>
<td>Ukraine</td>
<td>UP</td>
<td>UP</td>
<td>49.0</td>
<td>32.0</td>
<td>null</td>
<td>1</td>
<td>Ukraine</td>
<td>UP</td>
<td>UP</td>
<td>49.0</td>
<td>32.0</td>
<td>null</td>
<td>20140202</td>
<td>POINT&nbsp;(32&nbsp;49)</td>
</tr>
<tr class="row-even"><td>5</td>
<td>284464187</td>
<td>Sun&nbsp;Feb&nbsp;02&nbsp;00:00:00&nbsp;EST&nbsp;2014</td>
<td>201402</td>
<td>2014</td>
<td>2014.0876</td>
<td>USA</td>
<td>UNITED&nbsp;STATES</td>
<td>USA</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>UKR</td>
<td>UKRAINE</td>
<td>UKR</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>0</td>
<td>111</td>
<td>111</td>
<td>11</td>
<td>3</td>
<td>-2.0</td>
<td>5</td>
<td>1</td>
<td>5</td>
<td>1.4492754</td>
<td>4</td>
<td>Kiev,&nbsp;Ukraine&nbsp;(general),&nbsp;Ukraine</td>
<td>UP</td>
<td>UP00</td>
<td>50.4333</td>
<td>30.5167</td>
<td>-1044367</td>
<td>4</td>
<td>Kiev,&nbsp;Ukraine&nbsp;(general),&nbsp;Ukraine</td>
<td>UP</td>
<td>UP00</td>
<td>50.4333</td>
<td>30.5167</td>
<td>-1044367</td>
<td>4</td>
<td>Kiev,&nbsp;Ukraine&nbsp;(general),&nbsp;Ukraine</td>
<td>UP</td>
<td>UP00</td>
<td>50.4333</td>
<td>30.5167</td>
<td>-1044367</td>
<td>20140202</td>
<td>POINT&nbsp;(30.5167&nbsp;50.4333)</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="create-a-query-with-a-projection-for-two-attributes">
<h3>Create a query with a projection for two attributes<a class="headerlink" href="#create-a-query-with-a-projection-for-two-attributes" title="Permalink to this headline">¶</a></h3>
<p>This query uses a projection to only return the &#8216;Actor1Name&#8217; and &#8216;geom&#8217;
attributes.</p>
<div class="highlight-java"><div class="highlight"><pre><span class="n">String</span><span class="o">[]</span> <span class="n">properties</span> <span class="o">=</span> <span class="k">new</span> <span class="n">String</span><span class="o">[]</span> <span class="o">{</span><span class="s">&quot;Actor1Name&quot;</span><span class="o">,</span> <span class="s">&quot;geom&quot;</span><span class="o">};</span>
<span class="n">Query</span> <span class="n">query</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Query</span><span class="o">(</span><span class="n">simpleFeatureTypeName</span><span class="o">,</span> <span class="n">cqlFilter</span><span class="o">,</span> <span class="n">properties</span><span class="o">);</span>
</pre></div>
</div>
<p><strong>Output</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="19%" />
<col width="31%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Result</th>
<th class="head">Actor1Name</th>
<th class="head">geom</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>1</td>
<td>UNITED STATES</td>
<td>POINT (32 49)</td>
</tr>
<tr class="row-odd"><td>2</td>
<td>UNITED STATES</td>
<td>POINT (30.5167 50.4333)</td>
</tr>
<tr class="row-even"><td>3</td>
<td>UNITED STATES</td>
<td>POINT (30.5167 50.4333)</td>
</tr>
<tr class="row-odd"><td>4</td>
<td>UNITED STATES</td>
<td>POINT (30.5167 50.4333)</td>
</tr>
<tr class="row-even"><td>5</td>
<td>UNITED STATES</td>
<td>POINT (30.5167 50.4333)</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="create-a-query-with-an-attribute-transformation">
<h3>Create a query with an attribute transformation<a class="headerlink" href="#create-a-query-with-an-attribute-transformation" title="Permalink to this headline">¶</a></h3>
<p>This query performs a transformation on the &#8216;Actor1Name&#8217; attribute, to
print it in a more user-friendly format.</p>
<div class="highlight-java"><div class="highlight"><pre><span class="n">String</span><span class="o">[]</span> <span class="n">properties</span> <span class="o">=</span> <span class="k">new</span> <span class="n">String</span><span class="o">[]</span> <span class="o">{</span><span class="s">&quot;Actor1Name=strCapitalize(Actor1Name)&quot;</span><span class="o">,</span> <span class="s">&quot;geom&quot;</span><span class="o">};</span>
<span class="n">Query</span> <span class="n">query</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Query</span><span class="o">(</span><span class="n">simpleFeatureTypeName</span><span class="o">,</span> <span class="n">cqlFilter</span><span class="o">,</span> <span class="n">properties</span><span class="o">);</span>
</pre></div>
</div>
<p><strong>Output</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="19%" />
<col width="50%" />
<col width="31%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Result</th>
<th class="head">geom</th>
<th class="head">Actor1Name</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>1</td>
<td>POINT (30.5167 50.4333)</td>
<td>United States</td>
</tr>
<tr class="row-odd"><td>2</td>
<td>POINT (32 49)</td>
<td>United States</td>
</tr>
<tr class="row-even"><td>3</td>
<td>POINT (32 49)</td>
<td>United States</td>
</tr>
<tr class="row-odd"><td>4</td>
<td>POINT (30.5167 50.4333)</td>
<td>United States</td>
</tr>
<tr class="row-even"><td>5</td>
<td>POINT (30.5167 50.4333)</td>
<td>United States</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="create-a-query-with-a-derived-attribute">
<h3>Create a query with a derived attribute<a class="headerlink" href="#create-a-query-with-a-derived-attribute" title="Permalink to this headline">¶</a></h3>
<p>This query creates a new attribute called &#8216;derived&#8217; based off a join of
the &#8216;Actor1Name&#8217; and &#8216;Actor1Geo_FullName&#8217; attribute. This could be used
to show the actor and location of the event, for example.</p>
<div class="highlight-java"><div class="highlight"><pre><span class="n">String</span> <span class="n">property</span> <span class="o">=</span> <span class="s">&quot;derived=strConcat(Actor1Name,strConcat(&#39; - &#39;,Actor1Geo_FullName)),geom&quot;</span><span class="o">;</span>
<span class="n">String</span><span class="o">[]</span> <span class="n">properties</span> <span class="o">=</span> <span class="k">new</span> <span class="n">String</span><span class="o">[]</span> <span class="o">{</span> <span class="n">property</span> <span class="o">};</span>
<span class="n">Query</span> <span class="n">query</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Query</span><span class="o">(</span><span class="n">simpleFeatureTypeName</span><span class="o">,</span> <span class="n">cqlFilter</span><span class="o">,</span> <span class="n">properties</span><span class="o">);</span>
</pre></div>
</div>
<p><strong>Output</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="30%" />
<col width="59%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Result</th>
<th class="head">geom</th>
<th class="head">derived</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>1</td>
<td>POINT (30.5167 50.4333)</td>
<td>UNITED STATES - Kyiv, Kyyiv, Misto, Ukraine</td>
</tr>
<tr class="row-odd"><td>2</td>
<td>POINT (32 49)</td>
<td>UNITED STATES - Ukraine</td>
</tr>
<tr class="row-even"><td>3</td>
<td>POINT (30.5167 50.4333)</td>
<td>UNITED STATES - Kiev, Ukraine (general), Ukraine</td>
</tr>
<tr class="row-odd"><td>4</td>
<td>POINT (32 49)</td>
<td>UNITED STATES - Ukraine</td>
</tr>
<tr class="row-even"><td>5</td>
<td>POINT (30.5167 50.4333)</td>
<td>UNITED NATIONS - Kiev, Ukraine (general), Ukraine</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="create-a-query-with-a-geometric-transformation">
<h3>Create a query with a geometric transformation<a class="headerlink" href="#create-a-query-with-a-geometric-transformation" title="Permalink to this headline">¶</a></h3>
<p>This query performs a geometric transformation on the points returned,
buffering them by a fixed amount. This could be used to estimate an area
of impact around a particular event, for example.</p>
<div class="highlight-java"><div class="highlight"><pre><span class="n">String</span><span class="o">[]</span> <span class="n">properties</span> <span class="o">=</span> <span class="k">new</span> <span class="n">String</span><span class="o">[]</span> <span class="o">{</span><span class="s">&quot;geom,derived=buffer(geom, 2)&quot;</span><span class="o">};</span>
<span class="n">Query</span> <span class="n">query</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Query</span><span class="o">(</span><span class="n">simpleFeatureTypeName</span><span class="o">,</span> <span class="n">cqlFilter</span><span class="o">,</span> <span class="n">properties</span><span class="o">);</span>
</pre></div>
</div>
<p><strong>Output</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="1%" />
<col width="2%" />
<col width="97%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Result</th>
<th class="head">geom</th>
<th class="head">derived</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>1</td>
<td>POINT&nbsp;(30.5167&nbsp;50.4333)</td>
<td>POLYGON&nbsp;((32.5167&nbsp;50.4333,&nbsp;32.478270560806465&nbsp;50.04311935596775,&nbsp;32.36445906502257&nbsp;49.66793313526982,&nbsp;32.17963922460509&nbsp;49.3221595339608,&nbsp;31.930913562373096&nbsp;49.01908643762691,&nbsp;31.627840466039206&nbsp;48.77036077539491,&nbsp;31.28206686473018&nbsp;48.58554093497743,&nbsp;30.906880644032256&nbsp;48.47172943919354,&nbsp;30.5167&nbsp;48.4333,&nbsp;30.126519355967744&nbsp;48.47172943919354,&nbsp;29.75133313526982&nbsp;48.58554093497743,&nbsp;29.405559533960798&nbsp;48.77036077539491,&nbsp;29.102486437626904&nbsp;49.01908643762691,&nbsp;28.85376077539491&nbsp;49.3221595339608,&nbsp;28.668940934977428&nbsp;49.66793313526983,&nbsp;28.55512943919354&nbsp;50.04311935596775,&nbsp;28.5167&nbsp;50.4333,&nbsp;28.55512943919354&nbsp;50.82348064403226,&nbsp;28.668940934977428&nbsp;51.198666864730185,&nbsp;28.85376077539491&nbsp;51.54444046603921,&nbsp;29.102486437626908&nbsp;51.8475135623731,&nbsp;29.405559533960798&nbsp;52.09623922460509,&nbsp;29.751333135269824&nbsp;52.281059065022575,&nbsp;30.126519355967748&nbsp;52.39487056080647,&nbsp;30.516700000000004&nbsp;52.4333,&nbsp;30.906880644032263&nbsp;52.39487056080646,&nbsp;31.282066864730186&nbsp;52.281059065022575,&nbsp;31.62784046603921&nbsp;52.09623922460509,&nbsp;31.9309135623731&nbsp;51.847513562373095,&nbsp;32.1796392246051&nbsp;51.5444404660392,&nbsp;32.36445906502258&nbsp;51.19866686473018,&nbsp;32.478270560806465&nbsp;50.82348064403225,&nbsp;32.5167&nbsp;50.4333))</td>
</tr>
<tr class="row-odd"><td>2</td>
<td>POINT&nbsp;(30.5167&nbsp;50.4333)</td>
<td>POLYGON&nbsp;((32.5167&nbsp;50.4333,&nbsp;32.478270560806465&nbsp;50.04311935596775,&nbsp;32.36445906502257&nbsp;49.66793313526982,&nbsp;32.17963922460509&nbsp;49.3221595339608,&nbsp;31.930913562373096&nbsp;49.01908643762691,&nbsp;31.627840466039206&nbsp;48.77036077539491,&nbsp;31.28206686473018&nbsp;48.58554093497743,&nbsp;30.906880644032256&nbsp;48.47172943919354,&nbsp;30.5167&nbsp;48.4333,&nbsp;30.126519355967744&nbsp;48.47172943919354,&nbsp;29.75133313526982&nbsp;48.58554093497743,&nbsp;29.405559533960798&nbsp;48.77036077539491,&nbsp;29.102486437626904&nbsp;49.01908643762691,&nbsp;28.85376077539491&nbsp;49.3221595339608,&nbsp;28.668940934977428&nbsp;49.66793313526983,&nbsp;28.55512943919354&nbsp;50.04311935596775,&nbsp;28.5167&nbsp;50.4333,&nbsp;28.55512943919354&nbsp;50.82348064403226,&nbsp;28.668940934977428&nbsp;51.198666864730185,&nbsp;28.85376077539491&nbsp;51.54444046603921,&nbsp;29.102486437626908&nbsp;51.8475135623731,&nbsp;29.405559533960798&nbsp;52.09623922460509,&nbsp;29.751333135269824&nbsp;52.281059065022575,&nbsp;30.126519355967748&nbsp;52.39487056080647,&nbsp;30.516700000000004&nbsp;52.4333,&nbsp;30.906880644032263&nbsp;52.39487056080646,&nbsp;31.282066864730186&nbsp;52.281059065022575,&nbsp;31.62784046603921&nbsp;52.09623922460509,&nbsp;31.9309135623731&nbsp;51.847513562373095,&nbsp;32.1796392246051&nbsp;51.5444404660392,&nbsp;32.36445906502258&nbsp;51.19866686473018,&nbsp;32.478270560806465&nbsp;50.82348064403225,&nbsp;32.5167&nbsp;50.4333))</td>
</tr>
<tr class="row-even"><td>3</td>
<td>POINT&nbsp;(32&nbsp;49)</td>
<td>POLYGON&nbsp;((34&nbsp;49,&nbsp;33.961570560806464&nbsp;48.609819355967744,&nbsp;33.84775906502257&nbsp;48.23463313526982,&nbsp;33.66293922460509&nbsp;47.8888595339608,&nbsp;33.41421356237309&nbsp;47.58578643762691,&nbsp;33.1111404660392&nbsp;47.33706077539491,&nbsp;32.76536686473018&nbsp;47.15224093497743,&nbsp;32.390180644032256&nbsp;47.038429439193536,&nbsp;32&nbsp;47,&nbsp;31.609819355967744&nbsp;47.038429439193536,&nbsp;31.23463313526982&nbsp;47.15224093497743,&nbsp;30.888859533960797&nbsp;47.33706077539491,&nbsp;30.585786437626904&nbsp;47.58578643762691,&nbsp;30.33706077539491&nbsp;47.8888595339608,&nbsp;30.152240934977428&nbsp;48.234633135269824,&nbsp;30.03842943919354&nbsp;48.609819355967744,&nbsp;30&nbsp;49,&nbsp;30.03842943919354&nbsp;49.390180644032256,&nbsp;30.152240934977428&nbsp;49.76536686473018,&nbsp;30.33706077539491&nbsp;50.11114046603921,&nbsp;30.585786437626908&nbsp;50.4142135623731,&nbsp;30.888859533960797&nbsp;50.66293922460509,&nbsp;31.234633135269824&nbsp;50.84775906502257,&nbsp;31.609819355967748&nbsp;50.961570560806464,&nbsp;32.00000000000001&nbsp;51,&nbsp;32.39018064403226&nbsp;50.96157056080646,&nbsp;32.76536686473018&nbsp;50.84775906502257,&nbsp;33.11114046603921&nbsp;50.66293922460509,&nbsp;33.4142135623731&nbsp;50.41421356237309,&nbsp;33.6629392246051&nbsp;50.111140466039195,&nbsp;33.84775906502258&nbsp;49.765366864730176,&nbsp;33.961570560806464&nbsp;49.39018064403225,&nbsp;34&nbsp;49))</td>
</tr>
<tr class="row-odd"><td>4</td>
<td>POINT&nbsp;(30.5167&nbsp;50.4333)</td>
<td>POLYGON&nbsp;((32.5167&nbsp;50.4333,&nbsp;32.478270560806465&nbsp;50.04311935596775,&nbsp;32.36445906502257&nbsp;49.66793313526982,&nbsp;32.17963922460509&nbsp;49.3221595339608,&nbsp;31.930913562373096&nbsp;49.01908643762691,&nbsp;31.627840466039206&nbsp;48.77036077539491,&nbsp;31.28206686473018&nbsp;48.58554093497743,&nbsp;30.906880644032256&nbsp;48.47172943919354,&nbsp;30.5167&nbsp;48.4333,&nbsp;30.126519355967744&nbsp;48.47172943919354,&nbsp;29.75133313526982&nbsp;48.58554093497743,&nbsp;29.405559533960798&nbsp;48.77036077539491,&nbsp;29.102486437626904&nbsp;49.01908643762691,&nbsp;28.85376077539491&nbsp;49.3221595339608,&nbsp;28.668940934977428&nbsp;49.66793313526983,&nbsp;28.55512943919354&nbsp;50.04311935596775,&nbsp;28.5167&nbsp;50.4333,&nbsp;28.55512943919354&nbsp;50.82348064403226,&nbsp;28.668940934977428&nbsp;51.198666864730185,&nbsp;28.85376077539491&nbsp;51.54444046603921,&nbsp;29.102486437626908&nbsp;51.8475135623731,&nbsp;29.405559533960798&nbsp;52.09623922460509,&nbsp;29.751333135269824&nbsp;52.281059065022575,&nbsp;30.126519355967748&nbsp;52.39487056080647,&nbsp;30.516700000000004&nbsp;52.4333,&nbsp;30.906880644032263&nbsp;52.39487056080646,&nbsp;31.282066864730186&nbsp;52.281059065022575,&nbsp;31.62784046603921&nbsp;52.09623922460509,&nbsp;31.9309135623731&nbsp;51.847513562373095,&nbsp;32.1796392246051&nbsp;51.5444404660392,&nbsp;32.36445906502258&nbsp;51.19866686473018,&nbsp;32.478270560806465&nbsp;50.82348064403225,&nbsp;32.5167&nbsp;50.4333))</td>
</tr>
<tr class="row-even"><td>5</td>
<td>POINT&nbsp;(30.5167&nbsp;50.4333)</td>
<td>POLYGON&nbsp;((32.5167&nbsp;50.4333,&nbsp;32.478270560806465&nbsp;50.04311935596775,&nbsp;32.36445906502257&nbsp;49.66793313526982,&nbsp;32.17963922460509&nbsp;49.3221595339608,&nbsp;31.930913562373096&nbsp;49.01908643762691,&nbsp;31.627840466039206&nbsp;48.77036077539491,&nbsp;31.28206686473018&nbsp;48.58554093497743,&nbsp;30.906880644032256&nbsp;48.47172943919354,&nbsp;30.5167&nbsp;48.4333,&nbsp;30.126519355967744&nbsp;48.47172943919354,&nbsp;29.75133313526982&nbsp;48.58554093497743,&nbsp;29.405559533960798&nbsp;48.77036077539491,&nbsp;29.102486437626904&nbsp;49.01908643762691,&nbsp;28.85376077539491&nbsp;49.3221595339608,&nbsp;28.668940934977428&nbsp;49.66793313526983,&nbsp;28.55512943919354&nbsp;50.04311935596775,&nbsp;28.5167&nbsp;50.4333,&nbsp;28.55512943919354&nbsp;50.82348064403226,&nbsp;28.668940934977428&nbsp;51.198666864730185,&nbsp;28.85376077539491&nbsp;51.54444046603921,&nbsp;29.102486437626908&nbsp;51.8475135623731,&nbsp;29.405559533960798&nbsp;52.09623922460509,&nbsp;29.751333135269824&nbsp;52.281059065022575,&nbsp;30.126519355967748&nbsp;52.39487056080647,&nbsp;30.516700000000004&nbsp;52.4333,&nbsp;30.906880644032263&nbsp;52.39487056080646,&nbsp;31.282066864730186&nbsp;52.281059065022575,&nbsp;31.62784046603921&nbsp;52.09623922460509,&nbsp;31.9309135623731&nbsp;51.847513562373095,&nbsp;32.1796392246051&nbsp;51.5444404660392,&nbsp;32.36445906502258&nbsp;51.19866686473018,&nbsp;32.478270560806465&nbsp;50.82348064403225,&nbsp;32.5167&nbsp;50.4333))</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2015, GeoMesa.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.3.<br/>
    </p>
  </div>
</footer>
  </body>
</html>