

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Command Line Tools &mdash; GeoMesa  Manuals</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme_custom.css" type="text/css" />
  

  

  
    <link rel="top" title="GeoMesa  Manuals" href="../index.html"/>
        <link rel="up" title="GeoMesa 1.2.1-SNAPSHOT User Manual" href="index.html"/>
        <link rel="next" title="GeoMesa GeoServer Plugins" href="geoserver.html"/>
        <link rel="prev" title="Installation and Configuration" href="installation_and_configuration.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> GeoMesa
          

          
          </a>

          
            
            
              <div class="version">
                1.2.1-SNAPSHOT
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">GeoMesa 1.2.1-SNAPSHOT User Manual</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="architecture.html">Architecture Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="installation_and_configuration.html">Installation and Configuration</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">Command Line Tools</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#installation">Installation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#running-the-command-line-tools">Running the command line tools</a></li>
<li class="toctree-l3"><a class="reference internal" href="#command-overview">Command overview</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#creating-and-deleting-feature-types">Creating and deleting feature types</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ingesting-and-exporting-data">Ingesting and exporting data</a></li>
<li class="toctree-l4"><a class="reference internal" href="#working-with-raster-data">Working with raster data</a></li>
<li class="toctree-l4"><a class="reference internal" href="#performing-system-administration-tasks">Performing system administration tasks</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="geoserver.html">GeoMesa GeoServer Plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="examples.html">Examples</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../developer/index.html">GeoMesa 1.2.1-SNAPSHOT Developer Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/index.html">GeoMesa 1.2.1-SNAPSHOT Tutorials</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">GeoMesa</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
          <li><a href="index.html">GeoMesa 1.2.1-SNAPSHOT User Manual</a> &raquo;</li>
      
    <li>Command Line Tools</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/user/commandline_tools.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="command-line-tools">
<h1>Command Line Tools<a class="headerlink" href="#command-line-tools" title="Permalink to this headline">¶</a></h1>
<p>This chapter describes GeoMesa Tools, a set of command line tools for feature
management, query planning and explanation, ingest, and export from
the command line.</p>
<div class="section" id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<p>See <a class="reference internal" href="installation_and_configuration.html#setting-up-commandline"><span>Setting up the Command Line Tools</span></a>.</p>
</div>
<div class="section" id="running-the-command-line-tools">
<h2>Running the command line tools<a class="headerlink" href="#running-the-command-line-tools" title="Permalink to this headline">¶</a></h2>
<p>Run the <code class="docutils literal"><span class="pre">geomesa</span></code> without any arguments to produce the following usage text:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>$ geomesa
Warning: GEOMESA_HOME is not set, using /opt/devel/src/geomesa/geomesa-dist/target/geomesa-1.2.0-SNAPSHOT/dist/tools/geomesa-tools-1.2.0-SNAPSHOT
Usage: geomesa [command] [command options]
  Commands:
    create              Create a feature definition in a GeoMesa catalog
    deletecatalog       Delete a GeoMesa catalog completely (and all features in it)
    deleteraster        Delete a GeoMesa Raster Table
    describe            Describe the attributes of a given feature in GeoMesa
    env                 Examine the current GeoMesa environment
    explain             Explain how a GeoMesa query will be executed
    export              Export a GeoMesa feature
    getsft              Get the SimpleFeatureType of a feature
    help                Show help
    ingest              Ingest/convert various file formats into GeoMesa
    ingestraster        Ingest a raster file or raster files in a directory into GeoMesa
    list                List GeoMesa features for a given catalog
    queryrasterstats    Export queries and statistics about the last X number of queries to a CSV file.
    removeschema        Remove a schema and associated features from a GeoMesa catalog
    tableconf           Perform table configuration operations
    version             GeoMesa Version
</pre></div>
</div>
<p>This usage text lists the available commands. To see help for an individual command,
run <code class="docutils literal"><span class="pre">geomesa</span> <span class="pre">help</span> <span class="pre">&lt;command-name&gt;</span></code>, which for example will give you something like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>$ geomesa help list
Warning: GEOMESA_HOME is not set, using /opt/devel/src/geomesa/geomesa-dist/target/geomesa-1.2.0-SNAPSHOT/dist/tools/geomesa-tools-1.2.0-SNAPSHOT
List GeoMesa features for a given catalog
Usage: list [options]
  Options:
    --auths
       Accumulo authorizations
  * -c, --catalog
       Catalog table name for GeoMesa
    -i, --instance
       Accumulo instance name
    --mock
       Run everything with a mock accumulo instance instead of a real one
       Default: false
    -p, --password
       Accumulo password (will prompt if not supplied)
  * -u, --user
       Accumulo user name
    --visibilities
       Accumulo scan visibilities
    -z, --zookeepers
       Zookeepers (host[:port], comma separated)
</pre></div>
</div>
<p>The Accumulo username and password is required for each command. Specify the
username and password in each command by using <code class="docutils literal"><span class="pre">-u</span></code> (or <code class="docutils literal"><span class="pre">--username</span></code>) and <code class="docutils literal"><span class="pre">-p</span></code> (or
<code class="docutils literal"><span class="pre">--password</span></code>), respectively. One can also only specify the username on the
command line using <code class="docutils literal"><span class="pre">-u</span></code> or <code class="docutils literal"><span class="pre">--username</span></code> and type the password in an additional
prompt, where the password will be hidden from the shell history.</p>
<p>A test script is included under <code class="docutils literal"><span class="pre">geomesa-tools-$VERSION/bin/test-geomesa</span></code> that runs each
command provided by geomesa-tools. Edit this script by including your Accumulo
username, password, test catalog table, test feature name, and test SFT
specification. Default values are already included in the script. Then, run the
script from the command line to ensure there are no errors in the output text.</p>
<p>In nearly all commands below, one can add <code class="docutils literal"><span class="pre">--instance-name</span></code>, <code class="docutils literal"><span class="pre">--zookeepers</span></code>,
<code class="docutils literal"><span class="pre">--auths</span></code>, and <code class="docutils literal"><span class="pre">--visibilities</span></code> (or in short form <code class="docutils literal"><span class="pre">-i</span></code>, <code class="docutils literal"><span class="pre">-z</span></code>, <code class="docutils literal"><span class="pre">-a</span></code>, and <code class="docutils literal"><span class="pre">-v</span></code>) arguments
to properly configure the Accumulo data store connector. The Accumulo instance
name and Zookeepers string can usually be automatically assigned as long as
Accumulo is configured correctly. The Auths and Visibilities strings will have
to be added as arguments to each command, if needed.</p>
</div>
<div class="section" id="command-overview">
<h2>Command overview<a class="headerlink" href="#command-overview" title="Permalink to this headline">¶</a></h2>
<div class="section" id="creating-and-deleting-feature-types">
<h3>Creating and deleting feature types<a class="headerlink" href="#creating-and-deleting-feature-types" title="Permalink to this headline">¶</a></h3>
<div class="section" id="create">
<h4>create<a class="headerlink" href="#create" title="Permalink to this headline">¶</a></h4>
<p>Used to create a feature type (<code class="docutils literal"><span class="pre">SimpleFeatureType</span></code>)  in a GeoMesa catalog:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>$ geomesa create -u username -p password \
  -i instance -z zoo1,zoo2,zoo3 \
  -c test_create \
  -f testing \
  -s fid:String:index=true,dtg:Date,geom:Point:srid=4326 \
  --dtg dtg
</pre></div>
</div>
</div>
<div class="section" id="describe">
<h4>describe<a class="headerlink" href="#describe" title="Permalink to this headline">¶</a></h4>
<p>Display details about the attributes of a specified feature type:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>$ geomesa describe -u username -p password -c test_delete -f testing
</pre></div>
</div>
</div>
<div class="section" id="getsft">
<h4>getsft<a class="headerlink" href="#getsft" title="Permalink to this headline">¶</a></h4>
<p>Get the specified feature type as an encoded feature schema string:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>$ geomesa getsft -u username -p password -c test_catalog -f test_feature
</pre></div>
</div>
</div>
<div class="section" id="list">
<h4>list<a class="headerlink" href="#list" title="Permalink to this headline">¶</a></h4>
<p>List all known feature types in a GeoMesa catalog:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>$ geomesa list -u username -p password -c test_catalog
</pre></div>
</div>
</div>
<div class="section" id="removeschema">
<h4>removeschema<a class="headerlink" href="#removeschema" title="Permalink to this headline">¶</a></h4>
<p>Used to remove a feature type (<code class="docutils literal"><span class="pre">SimpleFeatureType</span></code>) in a GeoMesa catalog. This will also delete any feature of that type in the data store:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>$ geomesa removeschema -u username -p password \
  -i instance -z zoo1,zoo2,zoo3 \
  -c test_catalog -f testfeature1
$ geomesa removeschema -u username -p password \
  -i instance -z zoo1,zoo2,zoo3 \
  -c test_catalog --pattern &#39;testfeatures\d+&#39;
</pre></div>
</div>
</div>
</div>
<div class="section" id="ingesting-and-exporting-data">
<h3>Ingesting and exporting data<a class="headerlink" href="#ingesting-and-exporting-data" title="Permalink to this headline">¶</a></h3>
<div class="section" id="export">
<span id="id1"></span><h4>export<a class="headerlink" href="#export" title="Permalink to this headline">¶</a></h4>
<p>Export GeoMesa features. The &#8220;attribute expressions&#8221; specified by the <code class="docutils literal"><span class="pre">-a</span></code> option are comma-separated expressions
in the format:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>attribute[=filter_function_expression]|derived-attribute=filter_function_expression
</pre></div>
</div>
<p><cite>filter_function_expression</cite> is an expression of filter function applied to attributes, literals and filter functions, i.e. can be nested.</p>
<p>Example export commands:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>$ geomesa export -u username -p password \
  -c test_catalog -f test_feature \
  -a &quot;geom,text,user_name&quot; --format csv \
  -q &quot;include&quot; -m 100
$ geomesa export -u username -p password \
   -c test_catalog -f test_feature \
   -a &quot;geom,text,user_name&quot; --format gml \
   -q &quot;user_name=&#39;JohnSmith&#39;&quot;
$ geomesa export -u username -p password \
  -c test_catalog -f test_feature \
  -a &quot;user_name,buf=buffer(geom\, 2)&quot; \
   --format csv -q &quot;[[ user_name like `John%&#39; ] AND [ bbox(geom, 22.1371589, 44.386463, 40.228581, 52.379581, &#39;EPSG:4326&#39;) ]]&quot;
</pre></div>
</div>
</div>
<div class="section" id="ingest">
<span id="id2"></span><h4>ingest<a class="headerlink" href="#ingest" title="Permalink to this headline">¶</a></h4>
<p>Used to convert and ingest data from various file formats as GeoMesa features.</p>
<p>GeoMesa defines several common converter factories for formats such as delimited text
(TSV, CSV), fixed width files, JSON, XML, and Avro. New converter factories (e.g. for custom binary formats) can be
registered on the classpath using Java SPI. Shapefile ingest is also supported. Files can be either local or in HDFS.
You cannot mix target files (e.g. local and HDFS).</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The header, if present, is not parsed by <code class="docutils literal"><span class="pre">ingest</span></code> for information. It is assumed that all lines are valid entries.</p>
</div>
<p>Converters and SFTs are specified in HOCON format (<a class="reference external" href="https://github.com/typesafehub/config/blob/master/HOCON.md">https://github.com/typesafehub/config/blob/master/HOCON.md</a>) and
loaded using TypeSafe config. They can be referenced by name using the <code class="docutils literal"><span class="pre">-s</span></code> and <code class="docutils literal"><span class="pre">-C</span></code> args.</p>
<p>To define new converters for the users can package a <code class="docutils literal"><span class="pre">reference.conf</span></code> file inside a jar and drop it in the
<code class="docutils literal"><span class="pre">$GEOMESA_HOME/lib</span></code> directory or add config definitions to the <code class="docutils literal"><span class="pre">$GEOMESA_TOOLS/conf/application.conf</span></code> file which
includes some examples. SFT and Converter specifications should use the path prefixes
<code class="docutils literal"><span class="pre">geomesa.converters.&lt;convertername&gt;</span></code> and <code class="docutils literal"><span class="pre">geomesa.sfts.&lt;typename&gt;</span></code></p>
<p>For example...Here&#8217;s a simple CSV file to ingest named <code class="docutils literal"><span class="pre">example.csv</span></code>:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">ID</span><span class="p">,</span><span class="n">Name</span><span class="p">,</span><span class="n">Age</span><span class="p">,</span><span class="n">LastSeen</span><span class="p">,</span><span class="n">Friends</span><span class="p">,</span><span class="n">Lat</span><span class="p">,</span><span class="n">Lon</span>
<span class="mi">23623</span><span class="p">,</span><span class="n">Harry</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="mi">2015</span><span class="o">-</span><span class="mo">05</span><span class="o">-</span><span class="mo">06</span><span class="p">,</span><span class="s2">&quot;Will, Mark, Suzan&quot;</span><span class="p">,</span><span class="o">-</span><span class="mf">100.236523</span><span class="p">,</span><span class="mi">23</span>
<span class="mi">26236</span><span class="p">,</span><span class="n">Hermione</span><span class="p">,</span><span class="mi">25</span><span class="p">,</span><span class="mi">2015</span><span class="o">-</span><span class="mo">06</span><span class="o">-</span><span class="mo">07</span><span class="p">,</span><span class="s2">&quot;Edward, Bill, Harry&quot;</span><span class="p">,</span><span class="mf">40.232</span><span class="p">,</span><span class="o">-</span><span class="mf">53.2356</span>
<span class="mi">3233</span><span class="p">,</span><span class="n">Severus</span><span class="p">,</span><span class="mi">30</span><span class="p">,</span><span class="mi">2015</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mi">23</span><span class="p">,</span><span class="s2">&quot;Tom, Riddle, Voldemort&quot;</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="o">-</span><span class="mf">62.23</span>
</pre></div>
</div>
<p>To ingest this file, a SimpleFeatureType named <code class="docutils literal"><span class="pre">renegades</span></code> and a converter named <code class="docutils literal"><span class="pre">renegades-csv</span></code> can be placed in
the application.conf file:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span># cat $GEOMESA_HOME/conf/application.conf
geomesa {
  sfts {
    renegades = {
      attributes = [
        { name = &quot;id&quot;,       type = &quot;Integer&quot;,      index = false                             }
        { name = &quot;name&quot;,     type = &quot;String&quot;,       index = true                              }
        { name = &quot;age&quot;,      type = &quot;Integer&quot;,      index = false                             }
        { name = &quot;lastseen&quot;, type = &quot;Date&quot;,         index = true                              }
        { name = &quot;friends&quot;,  type = &quot;List[String]&quot;, index = true                              }
        { name = &quot;geom&quot;,     type = &quot;Point&quot;,        index = true, srid = 4326, default = true }
      ]
    }
  }
  converters {
    renegades-csv = {
      type   = &quot;delimited-text&quot;
      format = &quot;CSV&quot;
      options {
        skip-lines = 1 //skip the header
      }
      id-field = &quot;toString($id)&quot;
      fields = [
        { name = &quot;id&quot;,       transform = &quot;$1::int&quot;                 }
        { name = &quot;name&quot;,     transform = &quot;$2::string&quot;              }
        { name = &quot;age&quot;,      transform = &quot;$3::int&quot;                 }
        { name = &quot;lastseen&quot;, transform = &quot;date(&#39;YYYY-MM-dd&#39;, $4)&quot;  }
        { name = &quot;friends&quot;,  transform = &quot;parseList(&#39;string&#39;, $5)&quot; }
        { name = &quot;lon&quot;,      transform = &quot;$6::double&quot;              }
        { name = &quot;lat&quot;,      transform = &quot;$7::double&quot;              }
        { name = &quot;geom&quot;,     transform = &quot;point($lon, $lat)&quot;       }
      ]
    }
  }
}
</pre></div>
</div>
<p>The SFT and Converter can be referenced by name and the following commands can ingest the file:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>$ geomesa ingest -u username -p password \
  -c geomesa_catalog -i instance \
  -s renegates -C renegades-csv example1.csv
# use the Hadoop file system instead
$ geomesa ingest -u username -p password \
  -c geomesa_catalog -i instance \
  -s renegades -C renegades-csv hdfs:///some/hdfs/path/to/example1.csv
</pre></div>
</div>
<p>SFT and Converter configs can also be provided as strings or filenames to the <code class="docutils literal"><span class="pre">-s</span></code> and <code class="docutils literal"><span class="pre">-C</span></code> arguments. The syntax is
very similar to the <code class="docutils literal"><span class="pre">application.conf</span></code> and <code class="docutils literal"><span class="pre">reference.conf</span></code> format. Config specifications must be nested using the
paths <code class="docutils literal"><span class="pre">geomesa.converters.&lt;convertername&gt;</span></code> and <code class="docutils literal"><span class="pre">geomesa.sfts.&lt;typename&gt;</span></code> as shown below:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span># A nested SFT config provided as a string or file to the -s argument specifying
# a type named &quot;renegades&quot;
#
# cat /tmp/renegades.sft
geomesa.sfts.renegades = {
  attributes = [
    { name = &quot;id&quot;,       type = &quot;Integer&quot;,      index = false                             }
    { name = &quot;name&quot;,     type = &quot;String&quot;,       index = true                              }
    { name = &quot;age&quot;,      type = &quot;Integer&quot;,      index = false                             }
    { name = &quot;lastseen&quot;, type = &quot;Date&quot;,         index = true                              }
    { name = &quot;friends&quot;,  type = &quot;List[String]&quot;, index = true                              }
    { name = &quot;geom&quot;,     type = &quot;Point&quot;,        index = true, srid = 4326, default = true }
  ]
}
</pre></div>
</div>
<p>Similarly, converter configurations must be nested when passing them directly to the <code class="docutils literal"><span class="pre">-C</span></code> argument:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span># a nested converter definition
# cat /tmp/renegades.convert
geomesa.converters.renegades-csv = {
  type   = &quot;delimited-text&quot;
  format = &quot;CSV&quot;
  options {
    skip-lines = 0 // don&#39;t skip lines in distributed ingest
  }
  id-field = &quot;toString($id)&quot;
  fields = [
    { name = &quot;id&quot;,       transform = &quot;$1::int&quot;                 }
    { name = &quot;name&quot;,     transform = &quot;$2::string&quot;              }
    { name = &quot;age&quot;,      transform = &quot;$3::int&quot;                 }
    { name = &quot;lastseen&quot;, transform = &quot;date(&#39;YYYY-MM-dd&#39;, $4)&quot;  }
    { name = &quot;friends&quot;,  transform = &quot;parseList(&#39;string&#39;, $5)&quot; }
    { name = &quot;lon&quot;,      transform = &quot;$6::double&quot;              }
    { name = &quot;lat&quot;,      transform = &quot;$7::double&quot;              }
    { name = &quot;geom&quot;,     transform = &quot;point($lon, $lat)&quot;       }
  ]
}
</pre></div>
</div>
<p>Using the SFT and Converter config files we can then ingest our csv file with this command:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span># ingest command
geomesa ingest -u username -p password -c geomesa_catalog -i instance -s /tmp/renegades.sft -C /tmp/renegades.convert hdfs:///some/hdfs/path/to/example.csv
</pre></div>
</div>
<p>For more documentation on converter configuration, refer to the the <code class="docutils literal"><span class="pre">geomesa-$VERSION/docs/README-convert.md</span></code> file
in the binary distribution.</p>
<p>Shape files may also be ingested:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>$ geomesa ingest -u username -p password -c test_catalog -f shapeFileFeatureName /some/path/to/file.shp
</pre></div>
</div>
<p><strong>Enabling S3 Ingest</strong></p>
<p>Hadoop ships with an implementation of a S3 filesystems that can be enabled in the Hadoop configuration used with GeoMesa Tools. GeoMesa Tools can perform ingest using both the second-generation (<cite>s3n</cite>) and third-generation (<cite>s3a</cite>) filesystems. Edit the <cite>$HADOOP_CONF_DIR/core-site.xml</cite> file in your Hadoop installation, as shown below. These instructions apply to Hadoop 2.5.0 and higher. Note that you must have the environment variable <code class="docutils literal"><span class="pre">HADOOP_MAPRED_HOME</span></code> set properly in your environment. Some configurations can substitute <code class="docutils literal"><span class="pre">HADOOP_PREFIX</span></code> in the classpath values below.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Warning: AWS credentials are valueable. They pay for services and control read and write protection for data. If you are running GeoMesa on AWS EC2 instances, it is recommended to use s3a. With s3a, you can omit the Access Key Id and Secret Access keys from <cite>core-site.xml</cite> and rely on IAM roles.:</p>
</div>
<p>s3a:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>&lt;!-- core-site.xml --&gt;
&lt;property&gt;
    &lt;name&gt;mapreduce.application.classpath&lt;/name&gt;
    &lt;value&gt;$HADOOP_MAPRED_HOME/share/hadoop/mapreduce/*:$HADOOP_MAPRED_HOME/share/hadoop/mapreduce/lib/*:$HADOOP_MAPRED_HOME/share/hadoop/tools/lib/*&lt;/value&gt;
    &lt;description&gt;The classpath specifically for mapreduce jobs. This override is neeeded so that s3 URLs work on hadoop 2.6.0+&lt;/description&gt;
&lt;/property&gt;

&lt;!-- OMIT these keys if running on AWS EC2; use IAM roles instead --&gt;
&lt;property&gt;
    &lt;name&gt;fs.s3a.access.key&lt;/name&gt;
    &lt;value&gt;XXXX YOURS HERE&lt;/value&gt;
&lt;/property&gt;
&lt;property&gt;
    &lt;name&gt;fs.s3a.secret.key&lt;/name&gt;
    &lt;value&gt;XXXX YOURS HERE&lt;/value&gt;
    &lt;description&gt;Valueable credential - do not commit to CM&lt;/description&gt;
&lt;/property&gt;
</pre></div>
</div>
<p>After you have enabled S3 in your Hadoop configuration you can ingest with GeoMesa tools. Note that you can still use the Kleene star (*) with S3.:</p>
<blockquote>
<div>geomesa ingest -u username -p password -c geomesa_catalog -i instance -s yourspec -C convert s3a://bucket/path/file*</div></blockquote>
<p>s3n:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>&lt;!-- core-site.xml --&gt;
&lt;!-- Note that you need to make sure HADOOP_MAPRED_HOME is set or some other way of getting this on the classpath --&gt;
&lt;property&gt;
    &lt;name&gt;mapreduce.application.classpath&lt;/name&gt;
    &lt;value&gt;$HADOOP_MAPRED_HOME/share/hadoop/mapreduce/*:$HADOOP_MAPRED_HOME/share/hadoop/mapreduce/lib/*:$HADOOP_MAPRED_HOME/share/hadoop/tools/lib/*&lt;/value&gt;
    &lt;description&gt;The classpath specifically for mapreduce jobs. This override is needed so that s3 URLs work on hadoop 2.6.0+&lt;/description&gt;
&lt;/property&gt;
&lt;property&gt;
    &lt;name&gt;fs.s3n.impl&lt;/name&gt;
    &lt;value&gt;org.apache.hadoop.fs.s3native.NativeS3FileSystem&lt;/value&gt;
    &lt;description&gt;Tell hadoop which class to use to access s3 URLs. This change became necessary in hadoop 2.6.0&lt;/description&gt;
&lt;/property&gt;
&lt;property&gt;
    &lt;name&gt;fs.s3n.awsAccessKeyId&lt;/name&gt;
    &lt;value&gt;XXXX YOURS HERE&lt;/value&gt;
&lt;/property&gt;
&lt;property&gt;
    &lt;name&gt;fs.s3n.awsSecretAccessKey&lt;/name&gt;
    &lt;value&gt;XXXX YOURS HERE&lt;/value&gt;
&lt;/property&gt;
</pre></div>
</div>
<p>S3n paths are prefixed in hadoop with <code class="docutils literal"><span class="pre">s3n://</span></code> as shown below:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>geomesa ingest -u username -p password -c geomesa_catalog -i instance -s yourspec -C convert s3n://bucket/path/file s3n://bucket/path/*
</pre></div>
</div>
</div>
</div>
<div class="section" id="working-with-raster-data">
<h3>Working with raster data<a class="headerlink" href="#working-with-raster-data" title="Permalink to this headline">¶</a></h3>
<div class="section" id="deleteraster">
<h4>deleteraster<a class="headerlink" href="#deleteraster" title="Permalink to this headline">¶</a></h4>
<p>Delete a given GeoMesa raster table:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>$ geomesa deleteraster -u username -p password -t somerastertable -f
</pre></div>
</div>
</div>
<div class="section" id="ingestraster">
<h4>ingestraster<a class="headerlink" href="#ingestraster" title="Permalink to this headline">¶</a></h4>
<p>Ingest one or multiple raster image files into Geomesa. Input files, GeoTIFF or
DTED, should be located on the local file system.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Make sure GDAL is installed when doing chunking, which depends on the GDAL utility <code class="docutils literal"><span class="pre">gdal_translate</span></code>.</p>
<p class="last">Input raster files are assumed to have CRS set to EPSG:4326. For non-EPSG:4326 files, they need to be converted into
EPSG:4326 raster files before ingestion. An example of doing conversion with GDAL utility is <code class="docutils literal"><span class="pre">gdalwarp</span> <span class="pre">-t_srs</span> <span class="pre">EPSG:4326</span>
<span class="pre">input_file</span> <span class="pre">out_file</span></code>.</p>
</div>
<p>Example usage:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>$ geomesa ingestraster -u username -p password -t geomesa_raster -f /some/local/path/to/raster.tif
</pre></div>
</div>
</div>
<div class="section" id="queryrasterstats">
<h4>queryrasterstats<a class="headerlink" href="#queryrasterstats" title="Permalink to this headline">¶</a></h4>
<p>Export queries and statistics about the <cite>n</cite> most recent raster queries to a CSV file:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>$ geomesa queryrasterstats -u username -p password -t somerastertable -n 10
</pre></div>
</div>
</div>
</div>
<div class="section" id="performing-system-administration-tasks">
<h3>Performing system administration tasks<a class="headerlink" href="#performing-system-administration-tasks" title="Permalink to this headline">¶</a></h3>
<div class="section" id="deletecatalog">
<h4>deletecatalog<a class="headerlink" href="#deletecatalog" title="Permalink to this headline">¶</a></h4>
<p>Delete a GeoMesa catalog table completely, along with all features in it.:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>$ geomesa deletecatalog -u username -p password -i instance -z zoo1,zoo2,zoo3 -c test_catalog
</pre></div>
</div>
</div>
<div class="section" id="env">
<h4>env<a class="headerlink" href="#env" title="Permalink to this headline">¶</a></h4>
<p>Examines the current GeoMesa tools environment, and prints out simple feature types converters that
are available on the current classpath. The available types can be used for ingestion; see the <a class="reference internal" href="#ingest"><span>ingest</span></a> command.</p>
<p>Example usage:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>$ geomesa env
</pre></div>
</div>
</div>
<div class="section" id="explain">
<h4>explain<a class="headerlink" href="#explain" title="Permalink to this headline">¶</a></h4>
<p>Explain how a given GeoMesa query will be executed:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>$ geomesa explain -u username -p password \
  -c test_catalog -f test_feature \
  -q &quot;INTERSECTS(geom, POLYGON ((41 28, 42 28, 42 29, 41 29, 41 28)))&quot;
</pre></div>
</div>
</div>
<div class="section" id="tableconf">
<h4>tableconf<a class="headerlink" href="#tableconf" title="Permalink to this headline">¶</a></h4>
<p>Perform various table configuration tasks. There are three sub-arguments:</p>
<blockquote>
<div><ul class="simple">
<li><strong>list</strong> - List the configuration options for a GeoMesa table</li>
<li><strong>describe</strong> - Describe a given configuration option for a table</li>
<li><strong>update</strong> - Update a given configuration option for a table</li>
</ul>
</div></blockquote>
<p>Example commands:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>$ geomesa tableconf list -u username -p password \
  -c test_catalog -f test_feature -t st_idx
$ geomesa tableconf describe -u username -p password \
  -c test_catalog -f test_feature -t attr_idx \
  --param table.bloom.enabled
$ geomesa tableconf update -u username -p password \
  -c test_catalog -f test_feature -t records \
  --param table.bloom.enabled -n true
</pre></div>
</div>
</div>
<div class="section" id="version">
<h4>version<a class="headerlink" href="#version" title="Permalink to this headline">¶</a></h4>
<p>Prints out the version, git branch, and commit ID that the tools were built with:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>$ geomesa version
</pre></div>
</div>
</div>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="geoserver.html" class="btn btn-neutral float-right" title="GeoMesa GeoServer Plugins" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="installation_and_configuration.html" class="btn btn-neutral" title="Installation and Configuration" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2013-2016 Commonwealth Computer Research, Inc..

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.2.1-SNAPSHOT',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>