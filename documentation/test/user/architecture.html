<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Architecture Overview &mdash; GeoMesa 1.2.0 Manuals</title>
    
    <link rel="stylesheet" href="../_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.2.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="GeoMesa 1.2.0 Manuals" href="../index.html" />
    <link rel="up" title="GeoMesa 1.2.0 User Manual" href="index.html" />
    <link rel="next" title="Installation and Configuration" href="installation_and_configuration.html" />
    <link rel="prev" title="Introduction" href="introduction.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="installation_and_configuration.html" title="Installation and Configuration"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="introduction.html" title="Introduction"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">GeoMesa 1.2.0 Manuals</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">GeoMesa 1.2.0 User Manual</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Architecture Overview</a><ul>
<li><a class="reference internal" href="#geomesa-and-geoserver">GeoMesa and GeoServer</a></li>
<li><a class="reference internal" href="#integration-with-geomesa">Integration with GeoMesa</a></li>
<li><a class="reference internal" href="#key-value-stores-and-z-curves">Key-value stores and Z-curves</a></li>
<li><a class="reference internal" href="#geomesas-index">GeoMesa’s Index</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="introduction.html"
                        title="previous chapter">Introduction</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="installation_and_configuration.html"
                        title="next chapter">Installation and Configuration</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/user/architecture.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="architecture-overview">
<h1>Architecture Overview<a class="headerlink" href="#architecture-overview" title="Permalink to this headline">¶</a></h1>
<p>For scalability, GeoMesa is built on technologies that can use Apache Hadoop. This includes data stores such as Accumulo, HBase, and Google Cloud Bigtable, as well as the Apache Kafka message broker for streaming data. Apache Storm lets you define information sources and manipulations to allow batch distributed processing of streaming data with GeoMesa, and a GeoMesa environment can also take advantage of Apache Spark to do large-scale analytics of stored and streaming data.</p>
<img alt="../_images/GMHadoopInfrastructure.png" class="align-center" src="../_images/GMHadoopInfrastructure.png" />
<div class="section" id="geomesa-and-geoserver">
<span id="id1"></span><h2>GeoMesa and GeoServer<a class="headerlink" href="#geomesa-and-geoserver" title="Permalink to this headline">¶</a></h2>
<p>GeoMesa&#8217;s GeoServer plugins let GeoServer work with data stored using GeoMesa tables. The plugin maps the GeoServer capabilities associated with data sources to the GeoMesa formatted tables and provides a number of optimizations to support specific use cases.</p>
<p>If an application already uses GeoServer, integration with GeoMesa is simply a matter of adding a new datastore to GeoServer and updating the application’s configuration.</p>
<a class="reference internal image-reference" href="../_images/GeoServer-Integration.png"><img alt="../_images/GeoServer-Integration.png" class="align-center" src="../_images/GeoServer-Integration.png" style="width: 620.25px; height: 269.25px;" /></a>
</div>
<div class="section" id="integration-with-geomesa">
<h2>Integration with GeoMesa<a class="headerlink" href="#integration-with-geomesa" title="Permalink to this headline">¶</a></h2>
<p>To expose the geospatial data that it stores for use by your applications,
GeoMesa implements <a class="reference external" href="http://geotools.org/">GeoTools</a> interfaces to provide HTTP access to the following Open Geospatial Consortium standards:</p>
<ul class="simple">
<li><a class="reference external" href="http://www.opengeospatial.org/standards/wfs">Web Feature Service (WFS)</a></li>
<li><a class="reference external" href="http://www.opengeospatial.org/standards/wms">Web Mapping Service (WMS)</a></li>
<li><a class="reference external" href="http://www.opengeospatial.org/standards/wps">Web Processing Service (WPS)</a></li>
<li><a class="reference external" href="http://www.opengeospatial.org/standards/wcs">Web Coverage Service (WCS)</a></li>
</ul>
<p>For ingest, we recommend using Apache Storm. The following diagram shows one possible ingest architecture:</p>
<a class="reference internal image-reference" href="../_images/sampleIngestArch.png"><img alt="../_images/sampleIngestArch.png" class="align-center" src="../_images/sampleIngestArch.png" style="width: 683.25px; height: 369.75px;" /></a>
<p>The following shows one possible query architecture, in which the GeoTools and GeoMesa APIs mediate the use of Accumulo iterators for external query clients:</p>
<a class="reference internal image-reference" href="../_images/sampleQueryArch.png"><img alt="../_images/sampleQueryArch.png" class="align-center" src="../_images/sampleQueryArch.png" style="width: 776.25px; height: 342.0px;" /></a>
</div>
<div class="section" id="key-value-stores-and-z-curves">
<h2>Key-value stores and Z-curves<a class="headerlink" href="#key-value-stores-and-z-curves" title="Permalink to this headline">¶</a></h2>
<p>The data stores that GeoMesa uses for long-term storage are key-value databases, a type of NoSQL database in which every record is stored and retrieved using a unique identifier for that record known as a key. Accumulo, HBase, and Google Cloud Bigtable sort these keys and can store them across any number of nodes (servers).</p>
<p>When using a key-value database, good design of the keys themselves can lead to more efficient applications. Unlike relational databases, where the keys are frequently sequential integers, key value stores usually use the key to represent a feature by which the data are frequently queried. For example, imagine a database of customer orders being indexed by the order number. Then, when a client queries by order number, the database goes directly to that key and returns the value—that is, the record.</p>
<p>This is a simplification of how Accumulo, HBase, and Cloud Bigtable key structures actually work, but the foundational principle of GeoMesa can be explained in terms of keys and values. To store spatio-temporal data, we need to create a key that represents the time/space location of the record. GeoMesa uses this system to store locations as points along a special line that visits all the sectors of a map, like the red line shown here:</p>
<a class="reference internal image-reference" href="../_images/Zcurve-LoRes.png"><img alt="../_images/Zcurve-LoRes.png" class="align-center" src="../_images/Zcurve-LoRes.png" style="width: 800.0px; height: 400.0px;" /></a>
<p>This red line is known as a space-filling curve, or to be more specific, a Z-Curve. This line visits each cell exactly once, establishing a unique ordering of cells.</p>
<p>Space-filling curves can also work with higher-resolution maps, like the one shown here:</p>
<a class="reference internal image-reference" href="../_images/Zcurve-HiRes.png"><img alt="../_images/Zcurve-HiRes.png" class="align-center" src="../_images/Zcurve-HiRes.png" style="width: 799.24px; height: 399.62px;" /></a>
<p>Each point in this curve can be assigned a sequential value, letting GeoMesa represent what might have been a latitude-longitude pair as a single integer. This is great for representing two-dimensional data in a one-dimensional key, as is the case with a key-value datastore. Even more significantly, these space-filling curves can be adapted for n dimensions, letting GeoMesa linearize  n dimensions of data in a single dimension.</p>
</div>
<div class="section" id="geomesas-index">
<h2>GeoMesa’s Index<a class="headerlink" href="#geomesas-index" title="Permalink to this headline">¶</a></h2>
<p>The basic principle of GeoMesa’s index is to represent the three dimensions of longitude, latitude, and time with a three-dimensional space filling curve, using the values of the points along this curve as the key. This lets it store a record in a key-value store with a key that represents the three data dimensions that we most often use for queries.</p>
<p>The actual key structure is more complex than a simple key-value pair. Below is a more detailed representation of GeoMesa&#8217;s index in Accumulo:</p>
<a class="reference internal image-reference" href="../_images/GM_Index.png"><img alt="../_images/GM_Index.png" class="align-center" src="../_images/GM_Index.png" style="width: 626.5px; height: 214.0px;" /></a>
<p>Note the  Z3 encoding in the Key section and the <a class="reference external" href="https://en.wikipedia.org/wiki/Simple_Features">Simple Feature</a> (a spatial record) in the Value section. The structure of this key can be adjusted depending on the data, but this is the default.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="installation_and_configuration.html" title="Installation and Configuration"
             >next</a> |</li>
        <li class="right" >
          <a href="introduction.html" title="Introduction"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">GeoMesa 1.2.0 Manuals</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="index.html" >GeoMesa 1.2.0 User Manual</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2015, GeoMesa.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.3.
    </div>
  </body>
</html>