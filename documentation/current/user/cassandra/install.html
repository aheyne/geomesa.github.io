

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Installing GeoMesa Cassandra &mdash; GeoMesa 1.3.2-SNAPSHOT Manuals</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme_custom.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../../_static/sphinx_tabs/tabs.css" type="text/css" />
  
    <link rel="stylesheet" href="../../_static/sphinx_tabs/semantic-ui-2.2.7/segment.min.css" type="text/css" />
  
    <link rel="stylesheet" href="../../_static/sphinx_tabs/semantic-ui-2.2.7/menu.min.css" type="text/css" />
  
    <link rel="stylesheet" href="../../_static/sphinx_tabs/semantic-ui-2.2.7/tab.min.css" type="text/css" />
  

  
    <link rel="top" title="GeoMesa 1.3.2-SNAPSHOT Manuals" href="../../index.html"/> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> GeoMesa
          

          
          </a>

          
            
            
              <div class="version">
                1.3.2-SNAPSHOT
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul>
<li class="toctree-l1"><a class="reference internal" href="../index.html">User Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developer/index.html">Developer Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/index.html">Tutorials</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../index.html">GeoMesa</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index.html">Docs</a> &raquo;</li>
      
    <li>Installing GeoMesa Cassandra</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../_sources/user/cassandra/install.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="installing-geomesa-cassandra">
<h1>Installing GeoMesa Cassandra<a class="headerlink" href="#installing-geomesa-cassandra" title="Permalink to this headline">¶</a></h1>
<div class="section" id="connecting-to-cassandra">
<h2>Connecting to Cassandra<a class="headerlink" href="#connecting-to-cassandra" title="Permalink to this headline">¶</a></h2>
<p>The first step to getting started with Cassandra and GeoMesa is to install
Cassandra itself. You can find good directions for downloading and installing
Cassandra online. For example, see Cassandra&#8217;s official <a class="reference external" href="https://cassandra.apache.org/doc/latest/getting_started/index.html">getting started</a> documentation.</p>
<p>Once you have Cassandra installed, the next step is to prepare your Cassandra installation
to integrate with GeoMesa. First, create a key space within Cassandra. The easiest way to
do this with <tt class="docutils literal"><span class="pre">cqlsh</span></tt>, which should have been installed as part of your Cassandra installation.
Start <tt class="docutils literal"><span class="pre">cqlsh</span></tt>, then type:</p>
<div class="highlight-python"><div class="highlight"><pre>CREATE KEYSPACE mykeyspace WITH REPLICATION = {&#39;class&#39;: &#39;SimpleStrategy&#39;, &#39;replication_factor&#39; : 3};
</pre></div>
</div>
<p>This creates a key space called &#8220;mykeyspace&#8221;. This is a top-level name space within Cassandra
and it will provide a place for GeoMesa to put all of its data, including data for spatial features
and associated metadata.</p>
<p>Next, you&#8217;ll need to set the <tt class="docutils literal"><span class="pre">CASSANDRA_HOME</span></tt> environment variable. GeoMesa uses this variable
to find the Cassandra jars. These jars should be in the <tt class="docutils literal"><span class="pre">lib</span></tt> directory of your Cassandra
installation. To set the variable add the following line to your <tt class="docutils literal"><span class="pre">.profile</span></tt> or <tt class="docutils literal"><span class="pre">.bashrc</span></tt> file:</p>
<div class="highlight-python"><div class="highlight"><pre>export CASSANDRA_HOME=/path/to/cassandra
</pre></div>
</div>
<p>Finally, make sure you know a contact point for your Cassandra instance.
If you are just trying things locally, and using the default Cassandra settings,
the contact point would be <tt class="docutils literal"><span class="pre">127.0.0.1:9042</span></tt>. You can check and configure the
port you are using using the <tt class="docutils literal"><span class="pre">native_transport_port</span></tt> in the Cassandra
configuration file (located at <tt class="docutils literal"><span class="pre">conf/cassandra.yaml</span></tt> in your Cassandra
installation directory).</p>
</div>
<div class="section" id="installing-from-the-binary-distribution">
<h2>Installing from the Binary Distribution<a class="headerlink" href="#installing-from-the-binary-distribution" title="Permalink to this headline">¶</a></h2>
<p>GeoMesa Cassandra artifacts are available for download or can be built from source.
The easiest way to get started is to download the most recent binary version (<tt class="docutils literal"><span class="pre">$VERSION</span></tt> = 1.3.2-SNAPSHOT)
and untar it somewhere convenient:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="c"># download and unpackage the most recent distribution</span>
<span class="nv">$ </span>wget http://repo.locationtech.org/content/repositories/geomesa-releases/org/locationtech/geomesa/geomesa-cassandra-dist_2.11/<span class="nv">$VERSION</span>/geomesa-cassandra-dist_2.11-<span class="nv">$VERSION</span>-bin.tar.gz
<span class="nv">$ </span>tar xvf geomesa-cassandra.11-<span class="nv">$VERSION</span>-bin.tar.gz
<span class="nv">$ </span><span class="nb">cd </span>geomesa-cassandra-dist_2.11-<span class="nv">$VERSION</span>
<span class="nv">$ </span>ls
bin/  conf/  dist/  docs/  examples/  lib/  LICENSE.txt  logs/
</pre></div>
</div>
</div>
<div class="section" id="building-from-source">
<span id="cassandra-install-source"></span><h2>Building from Source<a class="headerlink" href="#building-from-source" title="Permalink to this headline">¶</a></h2>
<p>GeoMesa Cassandra may also be built from source. For more information refer to <a class="reference internal" href="../../developer/introduction.html#building-from-source"><em>Building from Source</em></a>
in the developer manual, or to the <tt class="docutils literal"><span class="pre">README.md</span></tt> file in the the source distribution.
The remainder of the instructions in this chapter assume the use of the binary GeoMesa Cassandra
distribution. If you have built from source, the distribution is created in the <tt class="docutils literal"><span class="pre">target</span></tt> directory of
<tt class="docutils literal"><span class="pre">geomesa-cassandra/geomesa-cassandra-dist</span></tt>.</p>
<p>More information about developing with GeoMesa may be found in the <a class="reference internal" href="../../developer/index.html"><em>Developer Manual</em></a>.</p>
</div>
<div class="section" id="setting-up-the-cassandra-command-line-tools">
<span id="setting-up-cassandra-commandline"></span><h2>Setting up the Cassandra Command Line Tools<a class="headerlink" href="#setting-up-the-cassandra-command-line-tools" title="Permalink to this headline">¶</a></h2>
<p>GeoMesa Cassandra comes with a set of command line tools for managing Cassandra features located in
<tt class="docutils literal"><span class="pre">geomesa-cassandra_2.11-$VERSION/bin/</span></tt> of the binary distribution.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You can configure environment variables and classpath settings in <tt class="docutils literal"><span class="pre">geomesa-cassandra_2.11-$VERSION/conf/geomesa-env.sh</span></tt>.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><tt class="docutils literal"><span class="pre">geomesa-cassandra</span></tt> will read the <tt class="docutils literal"><span class="pre">$CASSANDRA_HOME</span></tt> and <tt class="docutils literal"><span class="pre">$HADOOP_HOME</span></tt> environment variables to load the
appropriate JAR files for Cassandra and Hadoop. In addition, <tt class="docutils literal"><span class="pre">geomesa-cassandra</span></tt> will pull any
additional jars from the <tt class="docutils literal"><span class="pre">$GEOMESA_EXTRA_CLASSPATHS</span></tt> environment variable into the class path.
Use the <tt class="docutils literal"><span class="pre">geomesa</span> <span class="pre">classpath</span></tt> command in order to see what JARs are being used.</p>
</div>
<p>If you do not have a local Cassandra installation you will need to manually install the Cassandra JARs into the
tools <tt class="docutils literal"><span class="pre">lib</span></tt> folder. To do this, use the scripts provided with the distribution:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>bin/install-cassandra-jars.sh lib
<span class="nv">$ </span>bin/install-tools-jar.sh lib
</pre></div>
</div>
<p>Due to licensing restrictions, dependencies for shape file support must be separately installed.
Do this with the following commands:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>bin/install-jai.sh
<span class="nv">$ </span>bin/install-jline.sh
</pre></div>
</div>
<p>Run <tt class="docutils literal"><span class="pre">geomesa-cassandra</span></tt> without arguments to confirm that the tools work.</p>
<div class="code highlight-python"><div class="highlight"><pre>$ bin/geomesa-cassandra
INFO  Usage: geomesa-cassandra [command] [command options]
  Commands:
  ...
</pre></div>
</div>
</div>
<div class="section" id="installing-geomesa-cassandra-in-geoserver">
<span id="install-cassandra-geoserver"></span><h2>Installing GeoMesa Cassandra in GeoServer<a class="headerlink" href="#installing-geomesa-cassandra-in-geoserver" title="Permalink to this headline">¶</a></h2>
<p>The GeoMesa Cassandra distribution includes a GeoServer plugin for including
Cassandra data stores in GeoServer. The plugin files are in the
<tt class="docutils literal"><span class="pre">dist/gs-plugins/geomesa-cassandra-gs-plugin_2.11-$VERSION-install.tar.gz</span></tt> archive within the
GeoMesa Cassandra distribution directory.</p>
<p>To install the plugins, extract the archive and copy the contents to the <tt class="docutils literal"><span class="pre">WEB-INF/lib</span></tt>
directory of your GeoServer installation. You will also need to install the Cassandra JARs; these
are not bundled to allow for different versions. The distribution includes a script to download
the JARs: <tt class="docutils literal"><span class="pre">bin/install-cassandra-jars.sh</span></tt>. Call it with the path to the GeoServer <tt class="docutils literal"><span class="pre">WEB-INF/lib</span></tt> directory.
By default, it will install the following JARs:</p>
<blockquote>
<div><ul class="simple">
<li>cassandra-all-3.0.11.jar</li>
<li>cassandra-driver-core-3.0.0.jar</li>
<li>cassandra-driver-mapping-3.0.0.jar</li>
<li>netty-all-4.0.33.Final.jar</li>
<li>metrics-core-3.1.2.jar</li>
</ul>
</div></blockquote>
<p>Restart GeoServer after the JARs are installed.</p>
</div>
</div>


           </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2013-2017 Commonwealth Computer Research, Inc.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'1.3.2-SNAPSHOT',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
      <script type="text/javascript" src="../../_static/sphinx_tabs/tabs.js"></script>
      <script type="text/javascript" src="../../_static/sphinx_tabs/semantic-ui-2.2.7/tab.min.js"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>