

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>NYC Taxi &mdash; GeoMesa 1.3.1-SNAPSHOT Manuals</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../../_static/css/theme_custom.css" type="text/css" />
  

  

  
    <link rel="top" title="GeoMesa 1.3.1-SNAPSHOT Manuals" href="../../../index.html"/> 

  
  <script src="../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../../index.html" class="icon icon-home"> GeoMesa
          

          
          </a>

          
            
            
              <div class="version">
                1.3.1-SNAPSHOT
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul>
<li class="toctree-l1"><a class="reference internal" href="../../index.html">User Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../developer/index.html">Developer Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorials/index.html">Tutorials</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../../index.html">GeoMesa</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../../index.html">Docs</a> &raquo;</li>
      
    <li>NYC Taxi</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../../_sources/user/convert/premade/nyctaxi.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="nyc-taxi">
<h1>NYC Taxi<a class="headerlink" href="#nyc-taxi" title="Permalink to this headline">¶</a></h1>
<p>New York City taxi activity data published by the University of Illinois from
Freedom of Information Law requests to NYC Taxi and Limo Commission.
More information about the dataset is
<a class="reference external" href="https://publish.illinois.edu/dbwork/open-data/">here</a>.</p>
<p>The University of Illinois hosts the data in a Box web interface and arrives in
several zip archives. Only the &#8220;trip data&#8221; is examined here. There is
also &#8220;fare data&#8221; from the taxi meters such as fare amount and tip. Once
unpacked there are monthly CSV files covering four years.</p>
<div class="section" id="getting-the-data">
<h2>Getting the Data<a class="headerlink" href="#getting-the-data" title="Permalink to this headline">¶</a></h2>
<p>The .zip files are available for download
<a class="reference external" href="https://databank.illinois.edu/datasets/IDB-9610843">here</a>. Select
the desired zip files unzip them into a convenient directory.</p>
<p>The taxi data includes two points and two timestamps per record in the
original data. This presents an opportunity for different simple feature
type designs.</p>
<p>There is one design where each SFT is either a pickup or dropoff point
with a timestamp. The two points share a common trip ID. Internally they
are differentiated by hashing the record with either &#8220;pickup&#8221; or
&#8220;dropoff&#8221; appended. The advantage of this for geomesa demonstrations is
dealing with a larger quantity of point data.</p>
<p>In keeping with the original data, there is a two-point feature type as
well.</p>
<p>One could also imagine a <tt class="docutils literal"><span class="pre">LineString</span></tt> geometry, however the path is
underspecified. Previous analysis of the NYC Taxi data seems to have
used Google Maps API calls to propose valid paths through the streets.
We do not attempt that in this work.</p>
</div>
<div class="section" id="sample-ingest-command">
<h2>Sample ingest command<a class="headerlink" href="#sample-ingest-command" title="Permalink to this headline">¶</a></h2>
<p>Check that the <tt class="docutils literal"><span class="pre">nyctaxi</span></tt> and <tt class="docutils literal"><span class="pre">nyctaxi-single</span></tt> simple feature types
are available on the GeoMesa tools classpath. This is the default case.</p>
<div class="highlight-python"><div class="highlight"><pre>geomesa env | grep &#39;nyctaxi\|nyctaxi-single&#39;
</pre></div>
</div>
<p>If they are not, merge the contents of <tt class="docutils literal"><span class="pre">reference.conf</span></tt> with
<tt class="docutils literal"><span class="pre">$GEOMESA_ACCUMULO_HOME/conf/application.conf</span></tt>, or ensure that
<tt class="docutils literal"><span class="pre">reference.conf</span></tt> is in <tt class="docutils literal"><span class="pre">$GEOMESA_ACCUMULO_HOME/conf/sfts/nyctaxi</span></tt>.</p>
<div class="section" id="two-record-method">
<h3>Two record method<a class="headerlink" href="#two-record-method" title="Permalink to this headline">¶</a></h3>
<p>To ingest with GeoMesa command line interface, first the pickups:</p>
<div class="highlight-python"><div class="highlight"><pre>$ geomesa ingest -u username -c catalogName -s nyctaxi -C nyctaxi hdfs://namenode:9000/path/to/nyctaxi*
</pre></div>
</div>
<p>Then the dropoffs ingests the same file with the same simple feature
type, but a different converter.</p>
<div class="highlight-python"><div class="highlight"><pre>$ geomesa ingest -u username -c catalogName -s nyctaxi -C nyctaxi-drop hdfs://namenode:9000/path/to/nyctaxi*
</pre></div>
</div>
</div>
<div class="section" id="single-record-method">
<h3>Single record method<a class="headerlink" href="#single-record-method" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><div class="highlight"><pre>$ geomesa ingest -u username -c catalogName -s nyctaxi-single -C nyctaxi-single.conf hdfs://namenode:9000/path/to/nyctaxi*
</pre></div>
</div>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2013-2016 Commonwealth Computer Research, Inc.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../',
            VERSION:'1.3.1-SNAPSHOT',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../_static/doctools.js"></script>
      <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>