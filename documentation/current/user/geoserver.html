

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>GeoMesa GeoServer Plugins &mdash; GeoMesa 1.2.3 Manuals</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme_custom.css" type="text/css" />
  

  

  
    <link rel="top" title="GeoMesa 1.2.3 Manuals" href="../index.html"/>
        <link rel="up" title="User Manual" href="index.html"/>
        <link rel="next" title="GeoMesa Spark" href="spark.html"/>
        <link rel="prev" title="GeoMesa Web Data" href="web_data.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> GeoMesa
          

          
          </a>

          
            
            
              <div class="version">
                1.2.4-SNAPSHOT
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">User Manual</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="architecture.html">Architecture Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="installation_and_configuration.html">Installation and Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="datastores.html">GeoMesa Data Stores</a></li>
<li class="toctree-l2"><a class="reference internal" href="accumulo_datastore.html">Accumulo Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="kafka_datastore.html">Kafka Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="hbase_datastore.html">HBase/Bigtable Data Stores</a></li>
<li class="toctree-l2"><a class="reference internal" href="cassandra_datastore.html">Cassandra Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="modules.html">Modules and Libraries</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">GeoMesa GeoServer Plugins</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#installation">Installation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#creating-a-data-store">Creating a Data Store</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#accumulo-data-store">Accumulo Data Store</a></li>
<li class="toctree-l4"><a class="reference internal" href="#kafka-data-store">Kafka Data Store</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hbase-data-store">HBase Data Store</a></li>
<li class="toctree-l4"><a class="reference internal" href="#cassandra-data-store">Cassandra Data Store</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#publish-a-geomesa-layer">Publish a GeoMesa Layer</a></li>
<li class="toctree-l3"><a class="reference internal" href="#preview-a-layer">Preview a Layer</a></li>
<li class="toctree-l3"><a class="reference internal" href="#analysis-with-wps">Analysis with WPS</a></li>
<li class="toctree-l3"><a class="reference internal" href="#configuration">Configuration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#wms-plugin">WMS Plugin</a></li>
<li class="toctree-l4"><a class="reference internal" href="#query-logging">Query Logging</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#geomesa-geoserver-community-module">GeoMesa GeoServer Community Module</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="spark.html">GeoMesa Spark</a></li>
<li class="toctree-l2"><a class="reference internal" href="commandline_tools.html">Command Line Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="data_management.html">Data Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="examples.html">Examples</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../developer/index.html">Developer Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/index.html">Tutorials</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">GeoMesa</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
          <li><a href="index.html">User Manual</a> &raquo;</li>
      
    <li>GeoMesa GeoServer Plugins</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/user/geoserver.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="geomesa-geoserver-plugins">
<h1>GeoMesa GeoServer Plugins<a class="headerlink" href="#geomesa-geoserver-plugins" title="Permalink to this headline">¶</a></h1>
<p>A straightforward way to render, manipulate, and manage data stored
in GeoMesa data stores is to use <a class="reference external" href="http://www.geoserver.org/">GeoServer</a>,
an open source server for sharing geospatial data. This chapter describes
how to work with the GeoMesa GeoServer plugins.</p>
<div class="section" id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<p>Instructions for installing the GeoMesa plugins in GeoServer are
available at <a class="reference internal" href="installation_and_configuration.html#install-geoserver-plugins"><span>Installing the GeoMesa GeoServer Plugins</span></a>.</p>
<p>Go to your GeoServer installation at <code class="docutils literal"><span class="pre">http://&lt;hostname&gt;:8080/geoserver</span></code>.
For new installations of GeoServer, the default username is <code class="docutils literal"><span class="pre">admin</span></code> and
password is <code class="docutils literal"><span class="pre">geoserver</span></code>, but these may be different at your own installation.</p>
</div>
<div class="section" id="creating-a-data-store">
<h2>Creating a Data Store<a class="headerlink" href="#creating-a-data-store" title="Permalink to this headline">¶</a></h2>
<p>From the main GeoServer page, create a new store by either clicking
&#8220;Add stores&#8221; in the middle of the <strong>Welcome</strong> page, or anywhere in the
interface by clicking &#8220;Data &gt; Stores&#8221; in the left-hand menu and then
clicking &#8220;Add new Store&#8221;.</p>
<p>If you have properly installed the GeoMesa GeoServer plugins as described
in <a class="reference internal" href="installation_and_configuration.html#install-geoserver-plugins"><span>Installing the GeoMesa GeoServer Plugins</span></a>, the plugins with the names specified
below should be included in the list under <strong>Vector Data Sources</strong>. If you do not
see this for a particular plugin, check that you unpacked the plugin JARs
into in the right directory and restart GeoServer.</p>
<a class="reference internal image-reference" href="../_images/geoserver-geomesa-accumulo-data-source.png"><img alt="../_images/geoserver-geomesa-accumulo-data-source.png" class="align-center" src="../_images/geoserver-geomesa-accumulo-data-source.png" style="width: 563.25px; height: 282.75px;" /></a>
<div class="section" id="accumulo-data-store">
<span id="create-accumulo-ds-geoserver"></span><h3>Accumulo Data Store<a class="headerlink" href="#accumulo-data-store" title="Permalink to this headline">¶</a></h3>
<p>On the &#8220;Add Store&#8221; page, select &#8220;Accumulo (GeoMesa)&#8221;. The Accumulo Data Store takes
several parameters:</p>
<table border="1" class="docutils">
<colgroup>
<col width="19%" />
<col width="81%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Parameter</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>instanceId *</td>
<td>The instance ID of the Accumulo installation</td>
</tr>
<tr class="row-odd"><td>zookeepers *</td>
<td>A comma separated list of zookeeper servers (e.g. &#8220;zoo1,zoo2,zoo3&#8221; or &#8220;localhost:2181&#8221;)</td>
</tr>
<tr class="row-even"><td>user *</td>
<td>Accumulo username</td>
</tr>
<tr class="row-odd"><td>Password *</td>
<td>Accumulo password</td>
</tr>
<tr class="row-even"><td>tableName *</td>
<td>The name of the GeoMesa catalog table</td>
</tr>
<tr class="row-odd"><td>auths</td>
<td>Comma-delimited superset of authorizations that will be used for queries via Accumulo.</td>
</tr>
<tr class="row-even"><td>visibilities</td>
<td>Accumulo visibilities to apply to all written data</td>
</tr>
<tr class="row-odd"><td>queryTimeout</td>
<td>The max time (in sec) a query will be allowed to run before being killed</td>
</tr>
<tr class="row-even"><td>queryThreads</td>
<td>The number of threads to use per query</td>
</tr>
<tr class="row-odd"><td>recordThreads</td>
<td>The number of threads to use for record retrieval</td>
</tr>
<tr class="row-even"><td>writeThreads</td>
<td>The number of threads to use for writing records</td>
</tr>
<tr class="row-odd"><td>collectStats</td>
<td>Toggle collection of statistics</td>
</tr>
<tr class="row-even"><td>caching</td>
<td>Toggle caching of results</td>
</tr>
</tbody>
</table>
<p>The required parameters are marked with an asterisk. Click &#8220;Save&#8221;, and GeoServer will
search your Accumulo table for any GeoMesa-managed feature types.</p>
</div>
<div class="section" id="kafka-data-store">
<span id="create-kafka-ds-geoserver"></span><h3>Kafka Data Store<a class="headerlink" href="#kafka-data-store" title="Permalink to this headline">¶</a></h3>
<p>On the &#8220;Add Store&#8221; page, select &#8220;Kafka (GeoMesa)&#8221;. The Kafka Data Store takes several parameters.</p>
<table border="1" class="docutils">
<colgroup>
<col width="18%" />
<col width="9%" />
<col width="73%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Parameter</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>brokers *</td>
<td>String</td>
<td>Comma-separated list of Kafka brokers</td>
</tr>
<tr class="row-odd"><td>zookeepers *</td>
<td>String</td>
<td>Comma-separated list of Zookeeper servers</td>
</tr>
<tr class="row-even"><td>zkPath</td>
<td>String</td>
<td>Path to GeoMesa Kafka data in Zookeeper</td>
</tr>
<tr class="row-odd"><td>namespace</td>
<td>String</td>
<td>Namespace</td>
</tr>
<tr class="row-even"><td>partitions</td>
<td>Integer</td>
<td>Number of partitions to use in Kafka topics</td>
</tr>
<tr class="row-odd"><td>replication</td>
<td>Integer</td>
<td>Replication factor to use in Kafka topics</td>
</tr>
<tr class="row-even"><td>isProducer</td>
<td>Boolean</td>
<td>Indicates whether the Kafka Data Store is a producer</td>
</tr>
<tr class="row-odd"><td>expirationPeriod</td>
<td>Long</td>
<td>Feature will be &#8220;auto-dropped&#8221; (expired) after this delay
in milliseconds. Leave black or use -1 to not drop features.</td>
</tr>
<tr class="row-even"><td>cleanUpCache</td>
<td>Boolean</td>
<td>If true, run a thread to clean up the live feature cache every
second if set to true. False by default.</td>
</tr>
</tbody>
</table>
<p>The required parameters are marked with an asterisk. Click &#8220;Save&#8221;, and GeoServer
will search Kafka for any GeoMesa-managed feature types.</p>
</div>
<div class="section" id="hbase-data-store">
<span id="create-hbase-ds-geoserver"></span><h3>HBase Data Store<a class="headerlink" href="#hbase-data-store" title="Permalink to this headline">¶</a></h3>
<p>On the &#8220;Add Store&#8221; page, select &#8220;HBase (GeoMesa)&#8221;. The HBase data store takes two parameters:</p>
<ul class="simple">
<li><strong>bigtable.table.name</strong> - the name of the HBase table that stores feature type data</li>
<li><strong>namespace</strong> - the namespace URI for the data store (optional)</li>
</ul>
<p>Other configuration information is taken from the HBase <code class="docutils literal"><span class="pre">site.xml</span></code> file (see
<a class="reference internal" href="installation_and_configuration.html#install-hbase-geoserver"><span>For HBase</span></a>).</p>
<p>Click &#8220;Save&#8221;, and GeoServer will search HBase for any GeoMesa-managed feature types.</p>
</div>
<div class="section" id="cassandra-data-store">
<span id="create-cassandra-ds-geoserver"></span><h3>Cassandra Data Store<a class="headerlink" href="#cassandra-data-store" title="Permalink to this headline">¶</a></h3>
<p>On the &#8220;Add Store&#8221; page, select &#8220;Cassandra (GeoMesa)&#8221; as shown below.</p>
<img alt="../_images/CassandraNewDataSource.png" src="../_images/CassandraNewDataSource.png" />
<p>In the following page, enter the name and description of the data store, the contact point
(HOST:PORT), and the keyspace. Click &#8220;Save&#8221;, and GeoServer will search Cassandra for any
GeoMesa-managed feature types in that keyspace.</p>
<img alt="../_images/CassandraDSParams.png" src="../_images/CassandraDSParams.png" />
</div>
</div>
<div class="section" id="publish-a-geomesa-layer">
<h2>Publish a GeoMesa Layer<a class="headerlink" href="#publish-a-geomesa-layer" title="Permalink to this headline">¶</a></h2>
<p>After a GeoMesa data store is successfully created, GeoServer will present a list
of feature types registered in that data store. Click &#8220;Publish&#8221; next to the
name of a feature type to create a layer of the data in GeoMesa of that type.</p>
<p>You will be taken to the <strong>Edit Layer</strong> screen. To render your layer, you must
first set values for the bounding boxes in the &#8220;Data&#8221; pane. In many cases, you
can click on the &#8220;Compute from native bounds&#8221; link to compute these values
from the data.</p>
<img alt="../_images/geoserver-layer-bounding-box.png" class="align-center" src="../_images/geoserver-layer-bounding-box.png" />
<p>Click on the &#8220;Save&#8221; button when you are done.</p>
</div>
<div class="section" id="preview-a-layer">
<h2>Preview a Layer<a class="headerlink" href="#preview-a-layer" title="Permalink to this headline">¶</a></h2>
<p>Click on the &#8220;Layer Preview&#8221; link in the left-hand menu. Once you see your layer,
click on the &#8220;OpenLayers&#8221; link, which will open a new tab. If you have ingested
data into GeoMesa, it will be displayed here.</p>
<p>If the data you have ingested is a set of latitude/longitude points, click on
one of the points in the display (rendered by default as red squares), and GeoServer
will report detailed records stored in the GeoMesa store in the region underneath
the map area.</p>
<p>Click on the &#8220;Toggle options toolbar&#8221; icon in the upper-left corner
of the preview window. The right-hand side of the screen will include
a &#8220;Filter&#8221; text box. Enter a search query on the attributes of the feature type
of the data you have ingested, and press on the &#8220;play&#8221; icon. The display will now
show only those points matching your filter criterion.</p>
<p>This is a CQL filter, which can be constructed in various ways to query data. You can
find more information about CQL from <a class="reference external" href="http://docs.geoserver.org/latest/en/user/tutorials/cql/cql_tutorial.html">GeoServer&#8217;s CQL
tutorial</a>.</p>
</div>
<div class="section" id="analysis-with-wps">
<h2>Analysis with WPS<a class="headerlink" href="#analysis-with-wps" title="Permalink to this headline">¶</a></h2>
<p>As described by the Open Geospatial Consortium&#8217;s <a class="reference external" href="http://www.opengeospatial.org/standards/wms">Web Map Service</a> page,</p>
<blockquote>
<div>The OpenGIS® Web Map Service Interface Standard (WMS) provides a simple HTTP
interface for requesting geo-registered map images from one or more
distributed geospatial databases. A WMS request defines the geographic
layer(s) and area of interest to be processed. The response to the request is
one or more geo-registered map images (returned as JPEG, PNG, etc) that can be
displayed in a browser application. The interface also supports the ability to
specify whether the returned images should be transparent so that layers from
multiple servers can be combined or not.</div></blockquote>
<p>A tool like GeoServer (once its WPS plugin has been installed) uses WPS to
retrieve data from GeoMesa. WPS processes can be chained, letting you use
additional WPS requests to build on the results of earlier ones.</p>
</div>
<div class="section" id="configuration">
<h2>Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h2>
<div class="section" id="wms-plugin">
<h3>WMS Plugin<a class="headerlink" href="#wms-plugin" title="Permalink to this headline">¶</a></h3>
<p>Depending on your hardware, it may be important to set the limits for
your WMS plugin to be higher or disable them completely by clicking
&#8220;WMS&#8221; under &#8220;Services&#8221; on the left side of the admin page of GeoServer.
Check with your server administrator to determine the correct settings.
For massive queries, the standard 60 second timeout may be too short.</p>
<p><img alt="&quot;Disable limits&quot;" src="../_images/wms_limits.png" /></p>
</div>
<div class="section" id="query-logging">
<h3>Query Logging<a class="headerlink" href="#query-logging" title="Permalink to this headline">¶</a></h3>
<p>To enable explain query logging in GeoServer, add the following to the
<code class="docutils literal"><span class="pre">$GEOSERVER_DATA_DIR/logs/DEFAULT_LOGGING.properties</span></code> file:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">log4j</span><span class="o">.</span><span class="n">category</span><span class="o">.</span><span class="n">org</span><span class="o">.</span><span class="n">locationtech</span><span class="o">.</span><span class="n">geomesa</span><span class="o">.</span><span class="n">accumulo</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">QueryPlanner</span><span class="o">=</span><span class="n">TRACE</span>
</pre></div>
</div>
<p>If you are not sure of the location of your GeoServer data directory, it
is printed out when you start GeoServer:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>----------------------------------
- GEOSERVER_DATA_DIR: /opt/devel/install/geoserver-data-dir
----------------------------------
</pre></div>
</div>
</div>
</div>
<div class="section" id="geomesa-geoserver-community-module">
<h2>GeoMesa GeoServer Community Module<a class="headerlink" href="#geomesa-geoserver-community-module" title="Permalink to this headline">¶</a></h2>
<p>The GeoMesa community module adds support for raster imagery to GeoServer. The community module
requires the Accumulo GeoServer plugin to be installed first.</p>
<p>The community module can be downloaded from <a class="reference external" href="http://ares.opengeo.org/geoserver/">OpenGeo</a>, or can
be built from <a class="reference external" href="https://github.com/geoserver/geoserver/tree/master/src/community/geomesa">source</a>.</p>
<p>Once obtained, the community module can be installed by copying <code class="docutils literal"><span class="pre">geomesa-gs-&lt;version&gt;.jar</span></code> into
the GeoServer <code class="docutils literal"><span class="pre">lib</span></code> directory.</p>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="spark.html" class="btn btn-neutral float-right" title="GeoMesa Spark" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="web_data.html" class="btn btn-neutral" title="GeoMesa Web Data" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2013-2016 Commonwealth Computer Research, Inc.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.2.4-SNAPSHOT',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>