

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>6.8. Data Management &mdash; GeoMesa 1.3.0-m3-SNAPSHOT Manuals</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme_custom.css" type="text/css" />
  

  

  
    <link rel="top" title="GeoMesa 1.3.0-m3-SNAPSHOT Manuals" href="../../index.html"/>
        <link rel="up" title="6. Accumulo Data Store" href="index.html"/>
        <link rel="next" title="6.9. Explaining Query Plans" href="explaining.html"/>
        <link rel="prev" title="6.7. Accumulo Authorizations" href="authorizations.html"/> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> GeoMesa
          

          
          </a>

          
            
            
              <div class="version">
                1.3.0-m3-SNAPSHOT
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">User Manual</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../introduction.html">1. Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../architecture.html">2. Architecture Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting_started.html">3. Getting Started</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation_and_configuration.html">4. Installation and Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../datastores.html">5. GeoMesa Data Stores</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">6. Accumulo Data Store</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="configuration.html">6.1. Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="commandline_tools.html">6.2. Command Line Tools</a></li>
<li class="toctree-l3"><a class="reference internal" href="examples.html">6.3. Command Line Examples</a></li>
<li class="toctree-l3"><a class="reference internal" href="usage.html">6.4. Using the Accumulo Data Store Programmatically</a></li>
<li class="toctree-l3"><a class="reference internal" href="geoserver.html">6.5. Using the Accumulo Data Store in GeoServer</a></li>
<li class="toctree-l3"><a class="reference internal" href="visibilities.html">6.6. Accumulo Visibilities</a></li>
<li class="toctree-l3"><a class="reference internal" href="authorizations.html">6.7. Accumulo Authorizations</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">6.8. Data Management</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#index-structure">6.8.1. Index Structure</a></li>
<li class="toctree-l4"><a class="reference internal" href="#attribute-indices">6.8.2. Attribute Indices</a></li>
<li class="toctree-l4"><a class="reference internal" href="#configuring-z-index-shards">6.8.3. Configuring Z-Index Shards</a></li>
<li class="toctree-l4"><a class="reference internal" href="#customizing-the-z-index">6.8.4. Customizing the Z-Index</a></li>
<li class="toctree-l4"><a class="reference internal" href="#customizing-the-xz-index">6.8.5. Customizing the XZ-Index</a></li>
<li class="toctree-l4"><a class="reference internal" href="#customizing-index-creation">6.8.6. Customizing Index Creation</a></li>
<li class="toctree-l4"><a class="reference internal" href="#upgrading-existing-indices">6.8.7. Upgrading Existing Indices</a></li>
<li class="toctree-l4"><a class="reference internal" href="#splitting-the-record-index">6.8.8. Splitting the Record Index</a></li>
<li class="toctree-l4"><a class="reference internal" href="#moving-and-migrating-data">6.8.9. Moving and Migrating Data</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="explaining.html">6.9. Explaining Query Plans</a></li>
<li class="toctree-l3"><a class="reference internal" href="analytic_queries.html">6.10. Analytic Querying</a></li>
<li class="toctree-l3"><a class="reference internal" href="jobs.html">6.11. GeoMesa Jobs</a></li>
<li class="toctree-l3"><a class="reference internal" href="raster.html">6.12. GeoMesa Raster</a></li>
<li class="toctree-l3"><a class="reference internal" href="internals.html">6.13. Internals</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../kafka/index.html">7. Kafka Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../hbase/index.html">8. HBase Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bigtable/index.html">9. Bigtable Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cassandra/index.html">10. Cassandra Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../geoserver.html">11. GeoMesa GeoServer Plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../blobstore.html">12. GeoMesa Blob Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../convert.html">13. GeoMesa Convert</a></li>
<li class="toctree-l2"><a class="reference internal" href="../geojson.html">14. GeoMesa GeoJSON</a></li>
<li class="toctree-l2"><a class="reference internal" href="../metrics.html">15. GeoMesa Metrics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../native_api.html">16. GeoMesa Native API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../process.html">17. GeoMesa Processes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../spark/index.html">18. GeoMesa Spark</a></li>
<li class="toctree-l2"><a class="reference internal" href="../stream.html">19. GeoMesa Stream Processing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../web_data.html">20. GeoMesa Web Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#appendix">Appendix</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../developer/index.html">Developer Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/index.html">Tutorials</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../index.html">GeoMesa</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../index.html">User Manual</a> &raquo;</li>
      
          <li><a href="index.html">6. Accumulo Data Store</a> &raquo;</li>
      
    <li>6.8. Data Management</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../_sources/user/accumulo/data_management.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="data-management">
<h1>6.8. Data Management<a class="headerlink" href="#data-management" title="Permalink to this headline">¶</a></h1>
<p>GeoMesa provides many ways to optimize your data storage. You can add additional indices to speed up
certain queries, disable indices to speed up ingestion, pre-split tables for optimal data
distribution and migrate data between tables or environments.</p>
<div class="section" id="index-structure">
<span id="id1"></span><h2>6.8.1. Index Structure<a class="headerlink" href="#index-structure" title="Permalink to this headline">¶</a></h2>
<p>By default, GeoMesa creates a number of indices:</p>
<ul class="simple">
<li><strong>Z2</strong> - the Z2 index uses a two-dimensional Z-order curve to index latitude and longitude
for point data. This index will be created if the feature type has the geometry type
<code class="docutils literal"><span class="pre">Point</span></code>. This is used to efficiently answer queries of
features with point geometry with a spatial component but no temporal component.</li>
<li><strong>Z3</strong> - the Z3 index uses a three-dimensional Z-order curve to index latitude, longitude,
and time for point data. This index will be created if the feature type has the geometry
type <code class="docutils literal"><span class="pre">Point</span></code> and has a time attribute. This is used to efficiently answer queries of
features with point geometry with both spatial and temporal components.</li>
<li><strong>XZ2</strong> - the XZ2 index uses a two-dimensional implementation of XZ-ordering <a class="footnote-reference" href="#ref1" id="id2">[1]</a> to index
latitude and longitude for non-point data. XZ-ordering is an extension of Z-ordering
designed for spatially extended objects (i.e. non-point geometries such as line strings or
polygons). This index will be created if the feature type has a non-<code class="docutils literal"><span class="pre">Point</span></code> geometry. This
is used to efficiently answer queries of features with non-point geometry with a spatial
component but no temporal component.</li>
<li><strong>XZ3</strong> - the XZ3 index uses a three-dimensional implementation of XZ-ordering <a class="footnote-reference" href="#ref1" id="id3">[1]</a> to index
latitude, longitude, and time for non-point data. This index will be created if the feature
type has a non-<code class="docutils literal"><span class="pre">Point</span></code> geometry and has a time attribute. This is used to efficiently
answer queries of features with non-point geometry with both spatial and temporal components.</li>
<li><strong>Record</strong> - the record index stores features by feature ID. It is used for any query by ID. Additionally,
certain attribute queries may end up retrieving data from the record index. This is explained below.</li>
</ul>
<p>If specified, GeoMesa will also create the following indices:</p>
<ul class="simple">
<li><strong>Attribute</strong> - the attribute index uses attribute values as the primary index key. This allows for
fast retrieval of queries without a spatio-temporal component. Attribute indices can be created
in a &#8216;reduced&#8217; format, that takes up less disk space at the cost of performance for certain queries,
or a &#8216;full&#8217; format that takes up more space but can answer certain queries faster.</li>
</ul>
</div>
<div class="section" id="attribute-indices">
<span id="id4"></span><h2>6.8.2. Attribute Indices<a class="headerlink" href="#attribute-indices" title="Permalink to this headline">¶</a></h2>
<p>Some queries are slow to answer using the default indices. For example, with twitter data you
might want to return all tweets for a given user. To speed up this type of query, any
attribute in your simple feature type may be indexed individually.</p>
<p>Attribute indices may be one of two types: join or full.</p>
<div class="section" id="join-indices">
<h3>6.8.2.1. Join Indices<a class="headerlink" href="#join-indices" title="Permalink to this headline">¶</a></h3>
<p>Join indices store a reduced subset of data in the index - just the feature ID, the default date
and the default geometry. To answer most queries, a join against the record index is required
to retrieve the full simple features - hence the name join index. Joining against the record
table is slow when returning many results, and should generally be avoided except for small queries.</p>
<p>GeoMesa will avoid joining against the record table if it is possible to answer
a query with only the data in the join index. In general, this means that the query is only
returning the properties for the default date, default geometry and the attribute being queried.
In addition, any CQL filters must only operate on those three attributes as well.</p>
</div>
<div class="section" id="full-indices">
<h3>6.8.2.2. Full Indices<a class="headerlink" href="#full-indices" title="Permalink to this headline">¶</a></h3>
<p>Full indices store the full simple feature. This takes up the most space, but allows for any
query to be answered without joining against the record table.</p>
</div>
<div class="section" id="cardinality-hints">
<h3>6.8.2.3. Cardinality Hints<a class="headerlink" href="#cardinality-hints" title="Permalink to this headline">¶</a></h3>
<p>GeoMesa has a query planner that tries to find the best strategy for answering a given query. In
general, this means using the index that will filter the result set the most, before considering
the entire query filter on the reduced data set. For simple queries, there is often only one
suitable index. However, for mixed queries, there can be multiple options.</p>
<p>For example, given the query <code class="docutils literal"><span class="pre">bbox(geom,</span> <span class="pre">-120,</span> <span class="pre">-60,</span> <span class="pre">120,</span> <span class="pre">60)</span> <span class="pre">AND</span> <span class="pre">IN('id-01')</span></code>, we could try to
execute against the geohash index using the bounding box, or we could try to execute against the
record index using the feature ID. In this case, we know that the ID filter will match at most one
record, while the bbox filter could match many records, so we will choose the record index.</p>
<p>In order to force GeoMesa to always use the attribute index when available, you may specify
an attribute as having a high cardinality - i.e. having many distinct values. This implies
that a query against that attribute will return relatively few records. If a query contains
a filter against a high-cardinality attribute, the attribute index will always be used first.</p>
<p>Note that technically you may also specify attributes as low-cardinality - but in that case
it is better to just not index the attribute at all.</p>
</div>
<div class="section" id="adding-attribute-indices">
<h3>6.8.2.4. Adding Attribute Indices<a class="headerlink" href="#adding-attribute-indices" title="Permalink to this headline">¶</a></h3>
<p>To index an attribute, add an <code class="docutils literal"><span class="pre">index</span></code> hint to the attribute descriptor with a value of <code class="docutils literal"><span class="pre">join</span></code> or
<code class="docutils literal"><span class="pre">full</span></code>. The string <code class="docutils literal"><span class="pre">true</span></code> is also allowed for legacy reasons, and is equivalent to join. To set
the cardinality of an attribute, use the hint <code class="docutils literal"><span class="pre">cardinality</span></code> with a value of <code class="docutils literal"><span class="pre">high</span></code> or <code class="docutils literal"><span class="pre">low</span></code>.</p>
<p>Setting the hint can be done in multiple ways. If you are using a string to indicate your simple feature type
(e.g. through the command line tools, or when using <code class="docutils literal"><span class="pre">SimpleFeatureTypes.createType</span></code>), you can append
the hint to the attribute to be indexed, like so:</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="c1">// append the hint after the attribute type, separated by a colon</span>
<span class="n">String</span> <span class="n">spec</span> <span class="o">=</span> <span class="s">&quot;name:String:index=full:cardinality=high,age:Int:index=join,&quot;</span> <span class="o">+</span>
    <span class="s">&quot;dtg:Date,*geom:Point:srid=4326&quot;</span>
<span class="n">SimpleFeatureType</span> <span class="n">sft</span> <span class="o">=</span> <span class="n">SimpleFeatureTypes</span><span class="o">.</span><span class="na">createType</span><span class="o">(</span><span class="s">&quot;mySft&quot;</span><span class="o">,</span> <span class="n">spec</span><span class="o">);</span>
</pre></div>
</div>
<p>If you have an existing simple feature type, or you are not using <code class="docutils literal"><span class="pre">SimpleFeatureTypes.createType</span></code>,
you may set the hint directly in the feature type:</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="c1">// set the hint directly</span>
<span class="n">SimpleFeatureType</span> <span class="n">sft</span> <span class="o">=</span> <span class="o">...</span>
<span class="n">sft</span><span class="o">.</span><span class="na">getDescriptor</span><span class="o">(</span><span class="s">&quot;name&quot;</span><span class="o">).</span><span class="na">getUserData</span><span class="o">().</span><span class="na">put</span><span class="o">(</span><span class="s">&quot;index&quot;</span><span class="o">,</span> <span class="s">&quot;join&quot;</span><span class="o">);</span>
<span class="n">sft</span><span class="o">.</span><span class="na">getDescriptor</span><span class="o">(</span><span class="s">&quot;name&quot;</span><span class="o">).</span><span class="na">getUserData</span><span class="o">().</span><span class="na">put</span><span class="o">(</span><span class="s">&quot;cardinality&quot;</span><span class="o">,</span> <span class="s">&quot;high&quot;</span><span class="o">);</span>
</pre></div>
</div>
<p>If you are using TypeSafe configuration files to define your simple feature type, you may include the hint in
the attribute field:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="nx">geomesa</span> <span class="p">{</span>
  <span class="nx">sfts</span> <span class="p">{</span>
    <span class="s2">&quot;mySft&quot;</span> <span class="o">=</span> <span class="p">{</span>
      <span class="nx">attributes</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">{</span> <span class="nx">name</span> <span class="o">=</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">type</span> <span class="o">=</span> <span class="nb">String</span><span class="p">,</span> <span class="nx">index</span> <span class="o">=</span> <span class="nx">full</span><span class="p">,</span> <span class="nx">cardinality</span> <span class="o">=</span> <span class="nx">high</span> <span class="p">}</span>
        <span class="p">{</span> <span class="nx">name</span> <span class="o">=</span> <span class="nx">age</span><span class="p">,</span>  <span class="nx">type</span> <span class="o">=</span> <span class="nx">Int</span><span class="p">,</span>    <span class="nx">index</span> <span class="o">=</span> <span class="nx">join</span>                     <span class="p">}</span>
        <span class="p">{</span> <span class="nx">name</span> <span class="o">=</span> <span class="nx">dtg</span><span class="p">,</span>  <span class="nx">type</span> <span class="o">=</span> <span class="nb">Date</span>                                     <span class="p">}</span>
        <span class="p">{</span> <span class="nx">name</span> <span class="o">=</span> <span class="nx">geom</span><span class="p">,</span> <span class="nx">type</span> <span class="o">=</span> <span class="nx">Point</span><span class="p">,</span>  <span class="nx">srid</span> <span class="o">=</span> <span class="mi">4326</span>                      <span class="p">}</span>
      <span class="p">]</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>If you are using the GeoMesa <code class="docutils literal"><span class="pre">SftBuilder</span></code>, you may call the overloaded attribute methods:</p>
<div class="highlight-scala"><div class="highlight"><pre><span></span><span class="c1">// scala example</span>
<span class="k">import</span> <span class="nn">org.locationtech.geomesa.utils.geotools.SftBuilder.SftBuilder</span>
<span class="k">import</span> <span class="nn">org.locationtech.geomesa.utils.stats.Cardinality</span>

<span class="k">val</span> <span class="n">sft</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">SftBuilder</span><span class="o">()</span>
    <span class="o">.</span><span class="n">stringType</span><span class="o">(</span><span class="s">&quot;name&quot;</span><span class="o">,</span> <span class="nc">Opts</span><span class="o">(</span><span class="n">index</span> <span class="k">=</span> <span class="kc">true</span><span class="o">,</span> <span class="n">cardinality</span> <span class="k">=</span> <span class="nc">Cardinality</span><span class="o">.</span><span class="nc">HIGH</span><span class="o">))</span>
    <span class="o">.</span><span class="n">intType</span><span class="o">(</span><span class="s">&quot;age&quot;</span><span class="o">,</span> <span class="nc">Opts</span><span class="o">(</span><span class="n">index</span> <span class="k">=</span> <span class="kc">true</span><span class="o">))</span>
    <span class="o">.</span><span class="n">date</span><span class="o">(</span><span class="s">&quot;dtg&quot;</span><span class="o">)</span>
    <span class="o">.</span><span class="n">geometry</span><span class="o">(</span><span class="s">&quot;geom&quot;</span><span class="o">,</span> <span class="n">default</span> <span class="k">=</span> <span class="kc">true</span><span class="o">)</span>
    <span class="o">.</span><span class="n">build</span><span class="o">(</span><span class="s">&quot;mySft&quot;</span><span class="o">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="configuring-z-index-shards">
<span id="configuring-z-shards"></span><h2>6.8.3. Configuring Z-Index Shards<a class="headerlink" href="#configuring-z-index-shards" title="Permalink to this headline">¶</a></h2>
<p>GeoMesa Accumulo permits one to specify the number of shards (or splits) into which the Z2 (or Z3) indices are
divided. This parameter may be changed individually for each <code class="docutils literal"><span class="pre">SimpleFeatureType</span></code>. In previous versions of GeoMesa,
the numberof shards was fixed at 4, which remains the default. Valid values for the number of shards range
from 1 to 127 inclusive.</p>
<p>Shards allow us to pre-split tables, which provides some initial parallelism for reads and writes. As more data is
written, Accumulo will split tables based on size, thus obviating the need for explicit shards. For small data sets,
shards are more important as the tables might never split from size. Setting the number of shards too high can reduce
performance, as it requires more calculations to be performed per query.</p>
<p>The number of shards is set when calling <code class="docutils literal"><span class="pre">createSchema</span></code>. It may be specified through the simple feature type
user data using the hint <code class="docutils literal"><span class="pre">geomesa.z.splits</span></code>:</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="c1">// set the hint directly</span>
<span class="n">SimpleFeatureType</span> <span class="n">sft</span> <span class="o">=</span> <span class="o">...</span>
<span class="n">sft</span><span class="o">.</span><span class="na">getUserData</span><span class="o">().</span><span class="na">put</span><span class="o">(</span><span class="s">&quot;geomesa.z.splits&quot;</span><span class="o">,</span> <span class="s">&quot;4&quot;</span><span class="o">);</span>
</pre></div>
</div>
</div>
<div class="section" id="customizing-the-z-index">
<span id="customizing-z-index"></span><h2>6.8.4. Customizing the Z-Index<a class="headerlink" href="#customizing-the-z-index" title="Permalink to this headline">¶</a></h2>
<p>GeoMesa uses a z-curve index for time-based queries. By default, time is split into week-long chunks and indexed
per-week. If your queries are typically much larger or smaller than one week, you may wish to partition at a
different interval. GeoMesa provides four intervals - <code class="docutils literal"><span class="pre">day</span></code>, <code class="docutils literal"><span class="pre">week</span></code>, <code class="docutils literal"><span class="pre">month</span></code> or <code class="docutils literal"><span class="pre">year</span></code>. As the interval
gets larger, fewer partitions must be examined for a query, but the precision of each interval will go down.</p>
<p>If you typically query months of data at a time, then indexing per-month may provide better performance.
Alternatively, if you typically query minutes of data at a time, indexing per-day may be faster. The default
per-week partitioning tends to provides a good balance for most scenarios. Note that the optimal partitioning
depends on query patterns, not the distribution of data.</p>
<p>The time partitioning is set when calling <code class="docutils literal"><span class="pre">createSchema</span></code>. It may be specified through the simple feature type
user data using the hint <code class="docutils literal"><span class="pre">geomesa.z3.interval</span></code>:</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="c1">// set the hint directly</span>
<span class="n">SimpleFeatureType</span> <span class="n">sft</span> <span class="o">=</span> <span class="o">...</span>
<span class="n">sft</span><span class="o">.</span><span class="na">getUserData</span><span class="o">().</span><span class="na">put</span><span class="o">(</span><span class="s">&quot;geomesa.z3.interval&quot;</span><span class="o">,</span> <span class="s">&quot;month&quot;</span><span class="o">);</span>
</pre></div>
</div>
<p>See below for alternate ways to set the user data.</p>
</div>
<div class="section" id="customizing-the-xz-index">
<span id="customizing-xz-index"></span><h2>6.8.5. Customizing the XZ-Index<a class="headerlink" href="#customizing-the-xz-index" title="Permalink to this headline">¶</a></h2>
<p>GeoMesa uses an extended z-curve index for storing geometries with extents. The index can be customized
by specifying the resolution level used to store geometries. By default, the resolution level is 12. If
you have very large geometries, you may want to lower this value. Conversely, if you have very small
geometries, you may want to raise it.</p>
<p>The resolution level for an index is set when calling <code class="docutils literal"><span class="pre">createSchema</span></code>. It may be specified through
the simple feature type user data using the hint <code class="docutils literal"><span class="pre">geomesa.xz.precision</span></code>:</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="c1">// set the hint directly</span>
<span class="n">SimpleFeatureType</span> <span class="n">sft</span> <span class="o">=</span> <span class="o">...</span>
<span class="n">sft</span><span class="o">.</span><span class="na">getUserData</span><span class="o">().</span><span class="na">put</span><span class="o">(</span><span class="s">&quot;geomesa.xz.precision&quot;</span><span class="o">,</span> <span class="mi">12</span><span class="o">);</span>
</pre></div>
</div>
<p>See below for alternate ways to set the user data.</p>
<p>For more information on resolution level (g), see
&#8220;XZ-Ordering: A Space-Filling Curve for Objects with Spatial Extension&#8221; by Böhm, Klump and Kriegel.</p>
</div>
<div class="section" id="customizing-index-creation">
<span id="id5"></span><h2>6.8.6. Customizing Index Creation<a class="headerlink" href="#customizing-index-creation" title="Permalink to this headline">¶</a></h2>
<p>To speed up ingestion, or because you are only using certain query patterns, you may disable some indices.
The indices are created when calling <code class="docutils literal"><span class="pre">createSchema</span></code>. If nothing is specified, the Z2/Z3 (or XZ2/XZ3
depending on geometry type) indices and record indices will all be created, as well as any attribute
indices you have defined.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Certain queries may be much slower if you disable any indices.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">It is not currently possible to add core indices after schema creation. However, attribute
indices may be added at any time through map/reduce jobs - see <a class="reference internal" href="jobs.html#attribute-indexing-job"><span class="std std-ref">Attribute Indexing</span></a>.</p>
</div>
<p>To enable only certain indices, you may set a hint in your simple feature type. The hint key is
<code class="docutils literal"><span class="pre">geomesa.indexes.enabled</span></code>, and it should contain a comma-delimited list containing a subset of:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">z2</span></code> - corresponds to the Z2 index</li>
<li><code class="docutils literal"><span class="pre">z3</span></code> - corresponds to the Z3 index</li>
<li><code class="docutils literal"><span class="pre">records</span></code> - corresponds to the record index</li>
<li><code class="docutils literal"><span class="pre">attr_idx</span></code> - corresponds to the attribute index</li>
</ul>
<p>Setting the hint can be done in multiple ways. If you are using a string to indicate your simple feature type
(e.g. through the command line tools, or when using <code class="docutils literal"><span class="pre">SimpleFeatureTypes.createType</span></code>), you can append
the hint to the end of the string, like so:</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="c1">// append the hints to the end of the string, separated by a semi-colon</span>
<span class="n">String</span> <span class="n">spec</span> <span class="o">=</span> <span class="s">&quot;name:String,dtg:Date,*geom:Point:srid=4326;geomesa.indexes.enabled=&#39;records,z3&#39;&quot;</span><span class="o">;</span>
<span class="n">SimpleFeatureType</span> <span class="n">sft</span> <span class="o">=</span> <span class="n">SimpleFeatureTypes</span><span class="o">.</span><span class="na">createType</span><span class="o">(</span><span class="s">&quot;mySft&quot;</span><span class="o">,</span> <span class="n">spec</span><span class="o">);</span>
</pre></div>
</div>
<p>If you have an existing simple feature type, or you are not using <code class="docutils literal"><span class="pre">SimpleFeatureTypes.createType</span></code>,
you may set the hint directly in the feature type:</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="c1">// set the hint directly</span>
<span class="n">SimpleFeatureType</span> <span class="n">sft</span> <span class="o">=</span> <span class="o">...</span>
<span class="n">sft</span><span class="o">.</span><span class="na">getUserData</span><span class="o">().</span><span class="na">put</span><span class="o">(</span><span class="s">&quot;geomesa.indexes.enabled&quot;</span><span class="o">,</span> <span class="s">&quot;records,z3&quot;</span><span class="o">);</span>
</pre></div>
</div>
<p>If you are using TypeSafe configuration files to define your simple feature type, you may include
a &#8216;user-data&#8217; key:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="nx">geomesa</span> <span class="p">{</span>
  <span class="nx">sfts</span> <span class="p">{</span>
    <span class="s2">&quot;mySft&quot;</span> <span class="o">=</span> <span class="p">{</span>
      <span class="nx">attributes</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">{</span> <span class="nx">name</span> <span class="o">=</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">type</span> <span class="o">=</span> <span class="nb">String</span>             <span class="p">}</span>
        <span class="p">{</span> <span class="nx">name</span> <span class="o">=</span> <span class="nx">dtg</span><span class="p">,</span>  <span class="nx">type</span> <span class="o">=</span> <span class="nb">Date</span>               <span class="p">}</span>
        <span class="p">{</span> <span class="nx">name</span> <span class="o">=</span> <span class="nx">geom</span><span class="p">,</span> <span class="nx">type</span> <span class="o">=</span> <span class="nx">Point</span><span class="p">,</span> <span class="nx">srid</span> <span class="o">=</span> <span class="mi">4326</span> <span class="p">}</span>
      <span class="p">]</span>
      <span class="nx">user</span><span class="o">-</span><span class="nx">data</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">geomesa</span><span class="p">.</span><span class="nx">indexes</span><span class="p">.</span><span class="nx">enabled</span> <span class="o">=</span> <span class="s2">&quot;records,z3,attr_idx&quot;</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>If you are using the GeoMesa <code class="docutils literal"><span class="pre">SftBuilder</span></code>, you may call the <code class="docutils literal"><span class="pre">withIndexes</span></code> methods:</p>
<div class="highlight-scala"><div class="highlight"><pre><span></span><span class="c1">// scala example</span>
<span class="k">import</span> <span class="nn">org.locationtech.geomesa.utils.geotools.SftBuilder.SftBuilder</span>

<span class="k">val</span> <span class="n">sft</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">SftBuilder</span><span class="o">()</span>
    <span class="o">.</span><span class="n">stringType</span><span class="o">(</span><span class="s">&quot;name&quot;</span><span class="o">)</span>
    <span class="o">.</span><span class="n">date</span><span class="o">(</span><span class="s">&quot;dtg&quot;</span><span class="o">)</span>
    <span class="o">.</span><span class="n">geometry</span><span class="o">(</span><span class="s">&quot;geom&quot;</span><span class="o">,</span> <span class="n">default</span> <span class="k">=</span> <span class="kc">true</span><span class="o">)</span>
    <span class="o">.</span><span class="n">withIndexes</span><span class="o">(</span><span class="nc">List</span><span class="o">(</span><span class="s">&quot;records&quot;</span><span class="o">,</span> <span class="s">&quot;z3&quot;</span><span class="o">,</span> <span class="s">&quot;attr_idx&quot;</span><span class="o">))</span>
    <span class="o">.</span><span class="n">build</span><span class="o">(</span><span class="s">&quot;mySft&quot;</span><span class="o">)</span>
</pre></div>
</div>
<p>If the default geometry type is <code class="docutils literal"><span class="pre">Geometry</span></code> (i.e. supporting both point and non-point
features), you must explicitly enable &#8220;mixed&#8221; indexing mode with <code class="docutils literal"><span class="pre">geomesa.mixed.geometries</span></code>:</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="c1">// append the hints to the end of the string, separated by a semi-colon</span>
<span class="n">String</span> <span class="n">spec</span> <span class="o">=</span> <span class="s">&quot;name:String,dtg:Date,*geom:Geometry:srid=4326;geomesa.mixed.geometries=&#39;true&#39;&quot;</span><span class="o">;</span>
<span class="n">SimpleFeatureType</span> <span class="n">sft</span> <span class="o">=</span> <span class="n">SimpleFeatureTypes</span><span class="o">.</span><span class="na">createType</span><span class="o">(</span><span class="s">&quot;mySft&quot;</span><span class="o">,</span> <span class="n">spec</span><span class="o">);</span>
</pre></div>
</div>
</div>
<div class="section" id="upgrading-existing-indices">
<span id="index-upgrades"></span><h2>6.8.7. Upgrading Existing Indices<a class="headerlink" href="#upgrading-existing-indices" title="Permalink to this headline">¶</a></h2>
<p>GeoMesa often makes updates to indexing formats to improve query and write performance. However,
the index format for a given schema is fixed when it is first created. Updating GeoMesa versions
will provide bug fixes and new features, but will not update existing data to new index formats.</p>
<p>The following tables show the different indices available for different versions of GeoMesa. If not
known, the schema version for a feature type can be checked by examining the user data value
<code class="docutils literal"><span class="pre">geomesa.version</span></code>, or by scanning the Accumulo catalog table for <code class="docutils literal"><span class="pre">version</span></code>. For GeoMesa schemas
created with 1.2.7 or later, the version of each index is tracked separately and the overall schema
version is no longer maintained.</p>
<div class="section" id="schema-version-4-1-0-0-rc-7">
<h3>6.8.7.1. Schema version 4 - 1.0.0-rc.7<a class="headerlink" href="#schema-version-4-1-0-0-rc-7" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="9%" />
<col width="79%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Index</th>
<th class="head">Version</th>
<th class="head">Notes</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>GeoHash</td>
<td>1</td>
<td>Used for most queries</td>
</tr>
<tr class="row-odd"><td>Record</td>
<td>1</td>
<td>Used for queries on feature ID</td>
</tr>
<tr class="row-even"><td>Attribute</td>
<td>1</td>
<td>Used for attribute queries (when configured)</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="schema-version-5-1-1-0-rc-1-through-1-1-0-rc-2">
<h3>6.8.7.2. Schema version 5 - 1.1.0-rc.1 through 1.1.0-rc.2<a class="headerlink" href="#schema-version-5-1-1-0-rc-1-through-1-1-0-rc-2" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="9%" />
<col width="79%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Index</th>
<th class="head">Version</th>
<th class="head">Notes</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Z3</td>
<td>1</td>
<td>Replaces GeoHash index for spatio-temporal queries on point geometries</td>
</tr>
<tr class="row-odd"><td>GeoHash</td>
<td>1</td>
<td>&nbsp;</td>
</tr>
<tr class="row-even"><td>Record</td>
<td>1</td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td>Attribute</td>
<td>1</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="schema-version-6-1-1-0-rc-3-through-1-2-0">
<h3>6.8.7.3. Schema version 6 - 1.1.0-rc.3 through 1.2.0<a class="headerlink" href="#schema-version-6-1-1-0-rc-3-through-1-2-0" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="9%" />
<col width="79%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Index</th>
<th class="head">Version</th>
<th class="head">Notes</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Z3</td>
<td>1</td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td>GeoHash</td>
<td>1</td>
<td>&nbsp;</td>
</tr>
<tr class="row-even"><td>Record</td>
<td>1</td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td>Attribute</td>
<td>2</td>
<td>Added a composite date index and improved row-key collisions</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="schema-version-7-1-2-1">
<h3>6.8.7.4. Schema version 7 - 1.2.1<a class="headerlink" href="#schema-version-7-1-2-1" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="9%" />
<col width="79%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Index</th>
<th class="head">Version</th>
<th class="head">Notes</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Z3</td>
<td>2</td>
<td>Added support for non-point geometries and sharding for improved ingestion</td>
</tr>
<tr class="row-odd"><td>GeoHash</td>
<td>1</td>
<td>&nbsp;</td>
</tr>
<tr class="row-even"><td>Record</td>
<td>1</td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td>Attribute</td>
<td>2</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="schema-version-8-1-2-2-through-1-2-4">
<h3>6.8.7.5. Schema version 8 - 1.2.2 through 1.2.4<a class="headerlink" href="#schema-version-8-1-2-2-through-1-2-4" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="9%" />
<col width="79%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Index</th>
<th class="head">Version</th>
<th class="head">Notes</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Z3</td>
<td>2</td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td>Z2</td>
<td>1</td>
<td>Spatial only index to replace GeoHash index</td>
</tr>
<tr class="row-even"><td>Record</td>
<td>1</td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td>Attribute</td>
<td>2</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="schema-version-10-1-2-5">
<h3>6.8.7.6. Schema version 10 - 1.2.5+<a class="headerlink" href="#schema-version-10-1-2-5" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="9%" />
<col width="79%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Index</th>
<th class="head">Version</th>
<th class="head">Notes</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Z3</td>
<td>3</td>
<td>Support for attribute-level visibilities and improved feature ID encoding</td>
</tr>
<tr class="row-odd"><td>Z2</td>
<td>2</td>
<td>Support for attribute-level visibilities and improved feature ID encoding</td>
</tr>
<tr class="row-even"><td>XZ3</td>
<td>1</td>
<td>Spatio-temporal index with improved support for non-point geometries</td>
</tr>
<tr class="row-odd"><td>XZ2</td>
<td>1</td>
<td>Spatial index with improved support for non-point geometries</td>
</tr>
<tr class="row-even"><td>Record</td>
<td>2</td>
<td>Support for attribute-level visibilities and improved feature ID encoding</td>
</tr>
<tr class="row-odd"><td>Attribute</td>
<td>3</td>
<td>Support for attribute-level visibilities and improved feature ID encoding</td>
</tr>
</tbody>
</table>
<p>Using the GeoMesa command line tools, you can add or update an index to a newer version using <code class="docutils literal"><span class="pre">add-index</span></code>.
For example, you could add the XZ3 index to replace the Z3 index for a feature type with non-point geometries.
The command will populate the new index using a distributed job. For large data sets, you can choose to
only populate features matching a CQL filter (e.g. the last month), or choose to not populate any
data. The update is seamless, and clients can continue to query and ingest while it runs.</p>
<p>See <a class="reference internal" href="commandline_tools.html#add-index-command"><span class="std std-ref">add-index</span></a> for more details on the command line tools.</p>
</div>
</div>
<div class="section" id="splitting-the-record-index">
<h2>6.8.8. Splitting the Record Index<a class="headerlink" href="#splitting-the-record-index" title="Permalink to this headline">¶</a></h2>
<p>By default, GeoMesa assumes that feature IDs are UUIDs, and have an even distribution. If your
feature IDs do not follow this pattern, you may define a custom table splitter for the record index.
This will ensure that your features are spread across several different tablet servers, speeding
up ingestion and queries.</p>
<p>GeoMesa supplies three different table splitter options:</p>
<ul>
<li><p class="first"><code class="docutils literal"><span class="pre">org.locationtech.geomesa.index.conf.HexSplitter</span></code> (used by default)</p>
<p>Assumes an even distribution of IDs starting with 0-9, a-f, A-F</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">org.locationtech.geomesa.index.conf.AlphaNumericSplitter</span></code></p>
<p>Assumes an even distribution of IDs starting with 0-9, a-z, A-Z</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">org.locationtech.geomesa.index.conf.DigitSplitter</span></code></p>
<p>Assumes an even distribution of IDs starting with numeric values, which are specified as options</p>
</li>
</ul>
<p>Custom splitters may also be used - any class that extends <code class="docutils literal"><span class="pre">org.locationtech.geomesa.index.conf.TableSplitter</span></code>.</p>
<div class="section" id="specifying-a-table-splitter">
<h3>6.8.8.1. Specifying a Table Splitter<a class="headerlink" href="#specifying-a-table-splitter" title="Permalink to this headline">¶</a></h3>
<p>Table splitter may be specified by setting a hint when creating a simple feature type,
similar to enabling indices (above).</p>
<p>Setting the hint can be done in three ways. If you are using a string to indicate your simple feature type
(e.g. through the command line tools, or when using <code class="docutils literal"><span class="pre">SimpleFeatureTypes.createType</span></code>), you can append
the hint to the end of the string, like so:</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="c1">// append the hints to the end of the string, separated by a semi-colon</span>
<span class="n">String</span> <span class="n">spec</span> <span class="o">=</span> <span class="s">&quot;name:String,dtg:Date,*geom:Point:srid=4326;&quot;</span> <span class="o">+</span>
    <span class="s">&quot;table.splitter.class=org.locationtech.geomesa.index.conf.AlphaNumericSplitter&quot;</span><span class="o">;</span>
<span class="n">SimpleFeatureType</span> <span class="n">sft</span> <span class="o">=</span> <span class="n">SimpleFeatureTypes</span><span class="o">.</span><span class="na">createType</span><span class="o">(</span><span class="s">&quot;mySft&quot;</span><span class="o">,</span> <span class="n">spec</span><span class="o">);</span>
</pre></div>
</div>
<p>If you have an existing simple feature type, or you are not using <code class="docutils literal"><span class="pre">SimpleFeatureTypes.createType</span></code>,
you may set the hint directly in the feature type:</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="c1">// set the hint directly</span>
<span class="n">SimpleFeatureType</span> <span class="n">sft</span> <span class="o">=</span> <span class="o">...</span>
<span class="n">sft</span><span class="o">.</span><span class="na">getUserData</span><span class="o">().</span><span class="na">put</span><span class="o">(</span><span class="s">&quot;table.splitter.class&quot;</span><span class="o">,</span>
    <span class="s">&quot;org.locationtech.geomesa.index.conf.DigitSplitter&quot;</span><span class="o">);</span>
<span class="n">sft</span><span class="o">.</span><span class="na">getUserData</span><span class="o">().</span><span class="na">put</span><span class="o">(</span><span class="s">&quot;table.splitter.options&quot;</span><span class="o">,</span> <span class="s">&quot;fmt:%02d,min:0,max:99&quot;</span><span class="o">);</span>
</pre></div>
</div>
<p>If you are using TypeSafe configuration files to define your simple feature type, you may include
a &#8216;user-data&#8217; key:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="nx">geomesa</span> <span class="p">{</span>
  <span class="nx">sfts</span> <span class="p">{</span>
    <span class="s2">&quot;mySft&quot;</span> <span class="o">=</span> <span class="p">{</span>
      <span class="nx">attributes</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">{</span> <span class="nx">name</span> <span class="o">=</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">type</span> <span class="o">=</span> <span class="nb">String</span>             <span class="p">}</span>
        <span class="p">{</span> <span class="nx">name</span> <span class="o">=</span> <span class="nx">dtg</span><span class="p">,</span>  <span class="nx">type</span> <span class="o">=</span> <span class="nb">Date</span>               <span class="p">}</span>
        <span class="p">{</span> <span class="nx">name</span> <span class="o">=</span> <span class="nx">geom</span><span class="p">,</span> <span class="nx">type</span> <span class="o">=</span> <span class="nx">Point</span><span class="p">,</span> <span class="nx">srid</span> <span class="o">=</span> <span class="mi">4326</span> <span class="p">}</span>
      <span class="p">]</span>
      <span class="nx">user</span><span class="o">-</span><span class="nx">data</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">table</span><span class="p">.</span><span class="nx">splitter</span><span class="p">.</span><span class="kr">class</span> <span class="o">=</span> <span class="s2">&quot;org.locationtech.geomesa.index.conf.DigitSplitter&quot;</span>
        <span class="nx">table</span><span class="p">.</span><span class="nx">splitter</span><span class="p">.</span><span class="nx">options</span> <span class="o">=</span> <span class="s2">&quot;fmt:%01d,min:0,max:9&quot;</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="moving-and-migrating-data">
<h2>6.8.9. Moving and Migrating Data<a class="headerlink" href="#moving-and-migrating-data" title="Permalink to this headline">¶</a></h2>
<p>If you want an offline copy of your data, or you want to move data between networks, you can
export compressed Avro files containing your simple features. To do this using the command line
tools, use the export command with the <code class="docutils literal"><span class="pre">format</span></code> and <code class="docutils literal"><span class="pre">gzip</span></code> options:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ geomesa <span class="nb">export</span> -c myTable -f mySft --format avro --gzip <span class="m">6</span> -o myFeatures.avro
</pre></div>
</div>
<p>To re-import the data into another environment, you may use the import command. Because the Avro file
is self-describing, you do not need to specify any converter config or simple feature type definition:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ geomesa import -c myTable -f mySft myFeatures.avro
</pre></div>
</div>
<p>If your data is too large for a single file, you may run multiple exports and use CQL
filters to separate your data.</p>
<p>If you prefer to not use Avro files, you may do the same process with delimited text files:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ geomesa <span class="nb">export</span> -c myTable -f mySft --format tsv --gzip <span class="m">6</span> -o myFeatures.tsv.gz
$ geomesa import -c myTable -f mySft myFeatures.tsv.gz
</pre></div>
</div>
<p class="rubric">Footnotes</p>
<table class="docutils footnote" frame="void" id="ref1" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[1]</td><td><em>(<a class="fn-backref" href="#id2">1</a>, <a class="fn-backref" href="#id3">2</a>)</em> Böhm, Klump, and Kriegel. &#8220;XZ-ordering: a space-filling curve for objects with spatial extension.&#8221; 6th. Int. Symposium on Large Spatial Databases (SSD), 1999, Hong Kong, China. (<a class="reference external" href="http://www.dbs.ifi.lmu.de/Publikationen/Boehm/Ordering_99.pdf">http://www.dbs.ifi.lmu.de/Publikationen/Boehm/Ordering_99.pdf</a>)</td></tr>
</tbody>
</table>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="explaining.html" class="btn btn-neutral float-right" title="6.9. Explaining Query Plans" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="authorizations.html" class="btn btn-neutral" title="6.7. Accumulo Authorizations" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2013-2016 Commonwealth Computer Research, Inc.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'1.3.0-m3-SNAPSHOT',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>